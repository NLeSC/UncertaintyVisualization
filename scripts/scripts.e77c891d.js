!function(){"use strict";angular.module("uncertApp.dc",[]).constant("dc",dc),angular.module("uncertApp.d3",[]).constant("d3",d3),angular.module("uncertApp.crossfilter",[]).constant("crossfilter",crossfilter),angular.module("uncertApp.colorbrewer",[]).constant("colorbrewer",colorbrewer),angular.module("uncertApp",["ngAnimate","ngSanitize","ngTouch","ui.bootstrap","uncertApp.selector","uncertApp.viewstorylines","uncertApp.viewrelations","uncertApp.viewperspectives","uncertApp.fileLoading","uncertApp.breadcrumbs","uncertApp.allactorchart","uncertApp.subwaychart","uncertApp.grouprowchart","uncertApp.lanechart","uncertApp.serieschart","uncertApp.datatable","uncertApp.datatableperspectives","uncertApp.pollchart","uncertApp.pollrowchart","uncertApp.polllanechart","uncertApp.allcitationschart","uncertApp.allauthorschart","uncertApp.perspectivelanechart","uncertApp.perspectivefilters","uncertApp.charts"]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}]).run(["$timeout","DataService",function(a,b){angular.element(document).ready(function(){a(b.load(),1e3)})}]),angular.module("uncertApp.templates",[]),angular.module("uncertApp.utils",["uncertApp.templates"]),angular.module("uncertApp.ndx",["uncertApp.crossfilter","uncertApp.utils"]),angular.module("uncertApp.selector",["uncertApp.utils"]),angular.module("uncertApp.viewstorylines",[]),angular.module("uncertApp.viewrelations",[]),angular.module("uncertApp.viewperspectives",[]),angular.module("uncertApp.allactorchart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.subwaychart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.grouprowchart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.lanechart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.colorbrewer","uncertApp.ndx"]),angular.module("uncertApp.serieschart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.datatable",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.datatableperspectives",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.pollchart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.pollrowchart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.polllanechart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.colorbrewer","uncertApp.ndx"]),angular.module("uncertApp.allcitationschart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.allauthorschart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.perspectivelanechart",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.colorbrewer","uncertApp.ndx"]),angular.module("uncertApp.perspectivefilters",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.colorbrewer","uncertApp.ndx"]),angular.module("uncertApp.charts",["uncertApp.core","uncertApp.utils","uncertApp.d3","uncertApp.dc","uncertApp.ndx"]),angular.module("uncertApp.core",["uncertApp.utils","toastr","uncertApp.ndx"]),angular.module("uncertApp.fileLoading",["uncertApp.core","uncertApp.utils"]),angular.module("uncertApp.breadcrumbs",["uncertApp.core","uncertApp.dc","uncertApp.utils"])}(),function(){"use strict";function a(a){this.publish=function(){return a.$emit.apply(a,arguments)},this.subscribe=function(){return a.$on.apply(a,arguments)}}a.$inject=["$rootScope"],angular.module("uncertApp.utils").service("Messagebus",a)}(),function(){"use strict";angular.module("uncertApp.core").constant("uncertConf",{DATA_JSON_URL:"file:data/contextual.timeline-05-07.json",POLLS:!1})}(),dc.baseMixin=function(a){function b(){j&&j.attr("width",a.width()).attr("height",a.height())}function c(){return j=a.root().append("svg"),b(),j}function d(b){if(!a[b]||!a[b]())throw new dc.errors.InvalidStateException("Mandatory attribute chart."+b+" is missing on chart[#"+a.anchorName()+"]")}function e(b){if(a.dimension()&&a.dimension().filter){var c=I(a.dimension(),b);c&&(b=c)}return b}a.__dcFlag__=dc.utils.uniqueId();var f,g,h,i,j,k,l,m,n,o=200,p=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().width;return b&&b>o?b:o},q=p,r=200,s=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().height;return b&&b>r?b:r},t=s,u=dc.pluck("key"),v=dc.pluck("value"),w=dc.pluck("key"),x=dc.pluck("key"),y=!1,z=function(b){return a.keyAccessor()(b)+": "+a.valueAccessor()(b)},A=!0,B=!1,C=750,D=dc.printers.filters,E=["dimension","group"],F=dc.constants.DEFAULT_CHART_GROUP,G=d3.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),H=[],I=function(a,b){return 0===b.length?a.filter(null):1!==b.length||b[0].isFiltered?1===b.length&&"RangedFilter"===b[0].filterType?a.filterRange(b[0]):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a>=d&&d>=a)return!0}return!1}):a.filterExact(b[0]),b},J=function(a){return a.all()};a.height=function(b){return arguments.length?(t=d3.functor(b||s),a):t(i.node())},a.width=function(b){return arguments.length?(q=d3.functor(b||p),a):q(i.node())},a.minWidth=function(b){return arguments.length?(o=b,a):o},a.minHeight=function(b){return arguments.length?(r=b,a):r},a.dimension=function(b){return arguments.length?(f=b,a.expireCache(),a):f},a.data=function(b){return arguments.length?(J=d3.functor(b),a.expireCache(),a):J.call(a,g)},a.group=function(b,c){return arguments.length?(g=b,a._groupName=c,a.expireCache(),a):g},a.ordering=function(b){return arguments.length?(x=b,l=crossfilter.quicksort.by(x),a.expireCache(),a):x},a._computeOrderedGroups=function(a){var b=a.slice(0);return b.length<=1?b:(l||(l=crossfilter.quicksort.by(x)),l(b,0,b.length))},a.filterAll=function(){return a.filter(null)},a.select=function(a){return i.select(a)},a.selectAll=function(a){return i?i.selectAll(a):null},a.anchor=function(b,c){if(!arguments.length)return h;if(dc.instanceOfChart(b))h=b.anchor(),i=b.root(),k=!0;else{if(!b)throw new dc.errors.BadArgumentException("parent must be defined");h=b.select&&b.classed?b.node():b,i=d3.select(h),i.classed(dc.constants.CHART_CLASS,!0),dc.registerChart(a,c),k=!1}return F=c,a},a.anchorName=function(){var b=a.anchor();return b&&b.id?b.id:b&&b.replace?b.replace("#",""):"dc-chart"+a.chartID()},a.root=function(b){return arguments.length?(i=b,a):i},a.svg=function(b){return arguments.length?(j=b,a):j},a.resetSvg=function(){return a.select("svg").remove(),c()},a.filterPrinter=function(b){return arguments.length?(D=b,a):D},a.controlsUseVisibility=function(b){return arguments.length?(B=b,a):B},a.turnOnControls=function(){if(i){var b=a.controlsUseVisibility()?"visibility":"display";a.selectAll(".reset").style(b,null),a.selectAll(".filter").text(D(a.filters())).style(b,null)}return a},a.turnOffControls=function(){if(i){var b=a.controlsUseVisibility()?"visibility":"display",c=a.controlsUseVisibility()?"hidden":"none";a.selectAll(".reset").style(b,c),a.selectAll(".filter").style(b,c).text(a.filter())}return a},a.transitionDuration=function(b){return arguments.length?(C=b,a):C},a._mandatoryAttributes=function(b){return arguments.length?(E=b,a):E},a.render=function(){G.preRender(a),E&&E.forEach(d);var b=a._doRender();return m&&m.render(),a._activateRenderlets("postRender"),b},a._activateRenderlets=function(b){G.pretransition(a),a.transitionDuration()>0&&j?j.transition().duration(a.transitionDuration()).each("end",function(){G.renderlet(a),b&&G[b](a)}):(G.renderlet(a),b&&G[b](a))},a.redraw=function(){b(),G.preRedraw(a);var c=a._doRedraw();return m&&m.render(),a._activateRenderlets("postRedraw"),c},a.commitHandler=function(b){return arguments.length?(n=b,a):n},a.redrawGroup=function(){return n?n(!1,function(b,c){b?console.log(b):dc.redrawAll(a.chartGroup())}):dc.redrawAll(a.chartGroup()),a},a.renderGroup=function(){return n?n(!1,function(b,c){b?console.log(b):dc.renderAll(a.chartGroup())}):dc.renderAll(a.chartGroup()),a},a._invokeFilteredListener=function(b){void 0!==b&&G.filtered(a,b)},a._invokeZoomedListener=function(){G.zoomed(a)};var K=function(a,b){return null===b||"undefined"==typeof b?a.length>0:a.some(function(a){return a>=b&&b>=a})};a.hasFilterHandler=function(b){return arguments.length?(K=b,a):K},a.hasFilter=function(a){return K(H,a)};var L=function(a,b){for(var c=0;c<a.length;c++)if(a[c]<=b&&a[c]>=b){a.splice(c,1);break}return a};a.removeFilterHandler=function(b){return arguments.length?(L=b,a):L};var M=function(a,b){return a.push(b),a};a.addFilterHandler=function(b){return arguments.length?(M=b,a):M};var N=function(a){return[]};return a.resetFilterHandler=function(b){return arguments.length?(N=b,a):N},a.replaceFilter=function(b){H=[],a.filter(b)},a.filter=function(b){if(!arguments.length)return H.length>0?H[0]:null;var c=H;return b instanceof Array&&b[0]instanceof Array&&!b.isFiltered?b[0].forEach(function(a){c=K(c,a)?L(c,a):M(c,a)}):c=null===b?N(c):K(c,b)?L(c,b):M(c,b),H=e(c),a._invokeFilteredListener(b),null!==i&&a.hasFilter()?a.turnOnControls():a.turnOffControls(),a},a.reverseFilter=function(b){if(!a.hasFilter()){var c=a.data();c.forEach(function(c){b instanceof Array?b.indexOf(c.key)<0&&a.filter(c.key):b!==c.key&&a.filter(c.key)})}return a},a.filters=function(){return H},a.highlightSelected=function(a){d3.select(a).classed(dc.constants.SELECTED_CLASS,!0),d3.select(a).classed(dc.constants.DESELECTED_CLASS,!1)},a.fadeDeselected=function(a){d3.select(a).classed(dc.constants.SELECTED_CLASS,!1),d3.select(a).classed(dc.constants.DESELECTED_CLASS,!0)},a.resetHighlight=function(a){d3.select(a).classed(dc.constants.SELECTED_CLASS,!1),d3.select(a).classed(dc.constants.DESELECTED_CLASS,!1)},a.onClick=function(b){var c=a.keyAccessor()(b);dc.events.trigger(function(){1!==d3.event.which||d3.event.shiftKey?1===d3.event.which&&a.reverseFilter(c):a.filter(c,1!==d3.event.which),a.redrawGroup()})},a.filterHandler=function(b){return arguments.length?(I=b,a):I},a._doRender=function(){return a},a._doRedraw=function(){return a},a.legendables=function(){return[]},a.legendHighlight=function(){},a.legendReset=function(){},a.legendToggle=function(){},a.isLegendableHidden=function(){return!1},a.keyAccessor=function(b){return arguments.length?(u=b,a):u},a.valueAccessor=function(b){return arguments.length?(v=b,a):v},a.label=function(b,c){return arguments.length?(w=b,(void 0===c||c)&&(y=!0),a):w},a.renderLabel=function(b){return arguments.length?(y=b,a):y},a.title=function(b){return arguments.length?(z=b,a):z},a.renderTitle=function(b){return arguments.length?(A=b,a):A},a.renderlet=dc.logger.deprecate(function(b){return a.on("renderlet."+dc.utils.uniqueId(),b),a},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),a.chartGroup=function(b){return arguments.length?(k||dc.deregisterChart(a,F),F=b,k||dc.registerChart(a,F),a):F},a.expireCache=function(){return a},a.legend=function(b){return arguments.length?(m=b,m.parent(a),a):m},a.chartID=function(){return a.__dcFlag__},a.options=function(b){var c=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var d in b)"function"==typeof a[d]?b[d]instanceof Array&&-1!==c.indexOf(d)?a[d].apply(a,b[d]):a[d].call(a,b[d]):dc.logger.debug("Not a valid option setter name: "+d);return a},a.on=function(b,c){return G.on(b,c),a},a},dc.customCompositeChart=function(a,b){function c(){(void 0===s.rightY()||s.elasticY())&&(void 0===s.rightY()&&s.rightY(d3.scale.linear()),s.rightY().domain([j(),m()]).rangeRound([s.yAxisHeight(),0])),s.rightY().range([s.yAxisHeight(),0]),s.rightYAxis(s.rightYAxis().scale(s.rightY())),s.rightYAxis().orient("right")}function d(){(void 0===s.y()||s.elasticY())&&(void 0===s.y()&&s.y(d3.scale.linear()),s.y().domain([i(),l()]).rangeRound([s.yAxisHeight(),0])),s.y().range([s.yAxisHeight(),0]),s.yAxis(s.yAxis().scale(s.y())),s.yAxis().orient("left")}function e(a,b){a._generateG(s.g()),a.g().attr("class",q+" _"+b)}function f(){return t.filter(function(a){return!a.useRightYAxis()})}function g(){return t.filter(function(a){return a.useRightYAxis()})}function h(a){return a.map(function(a){return a.yAxisMin()})}function i(){return d3.min(h(f()))}function j(){return d3.min(h(g()))}function k(a){return a.map(function(a){return a.yAxisMax()})}function l(){return dc.utils.add(d3.max(k(f())),s.yAxisPadding())}function m(){return dc.utils.add(d3.max(k(g())),s.yAxisPadding())}function n(){return t.map(function(a){return a.xAxisMin()})}function o(){return t.map(function(a){return a.xAxisMax()})}var p,q="sub",r=12,s=dc.coordinateGridMixin({}),t=[],u={},v=!1,w=!0,x=d3.svg.axis(),y=0,z=r,A=!1;return s._mandatoryAttributes([]),s.transitionDuration(500),dc.override(s,"_generateG",function(){for(var a=this.__generateG(),b=0;b<t.length;++b){var c=t[b];e(c,b),c.dimension()||c.dimension(s.dimension()),c.group()||c.group(s.group()),c.chartGroup(s.chartGroup()),c.svg(s.svg()),c.xUnits(s.xUnits()),c.transitionDuration(s.transitionDuration()),c.brushOn(s.brushOn()),c.renderTitle(s.renderTitle()),c.elasticX(s.elasticX())}return a}),s.setHandlePaths=function(){},dc.override(s,"_filter",function(a){return arguments.length?s.__filter(dc.filters.RangedTwoDimensionalFilter(a)):s.__filter()}),s.extendBrush=function(){var a=s.brush().extent();return s.round()&&(a[0]=a[0].map(s.round()),a[1]=a[1].map(s.round()),s.g().select(".brush").call(s.brush().extent(a))),a},s.brushIsEmpty=function(a){return s.brush().empty()||!a||a[0][0]>=a[1][0]||a[0][1]>=a[1][1]},s._brushing=function(){var a=s.extendBrush();if(s.redrawBrush(s.g()),s.brushIsEmpty(a))dc.events.trigger(function(){s.replaceFilter(null),s.redrawGroup()});else{var b=dc.filters.RangedTwoDimensionalFilter(a);dc.events.trigger(function(){s.replaceFilter(b),s.redrawGroup()},dc.constants.EVENT_DELAY)}},s.setBrushY=function(a){a.call(s.brush().y(s.y()))},s._prepareYAxis=function(){0!==f().length&&d(),0!==g().length&&c(),f().length>0&&!A?s._renderHorizontalGridLinesForAxis(s.g(),s.y(),s.yAxis()):g().length>0&&s._renderHorizontalGridLinesForAxis(s.g(),p,x)},s.renderYAxis=function(){0!==f().length&&(s.renderYAxisAt("y",s.yAxis(),s.margins().left),s.renderYAxisLabel("y",s.yAxisLabel(),-90)),0!==g().length&&(s.renderYAxisAt("yr",s.rightYAxis(),s.width()-s.margins().right),s.renderYAxisLabel("yr",s.rightYAxisLabel(),90,s.width()-z))},s.plotData=function(){for(var a=0;a<t.length;++a){var b=t[a];b.g()||e(b,a),v&&b.colors(s.colors()),b.x(s.x()),b.xAxis(s.xAxis()),b.useRightYAxis()?(b.y(s.rightY()),b.yAxis(s.rightYAxis())):(b.y(s.y()),b.yAxis(s.yAxis())),b.plotData(),b._activateRenderlets()}},s.useRightAxisGridLines=function(a){return arguments?(A=a,s):A},s.childOptions=function(a){return arguments.length?(u=a,t.forEach(function(a){a.options(u)}),s):u},s.fadeDeselectedArea=function(){for(var a=0;a<t.length;++a){var b=t[a];b.brush(s.brush()),b.fadeDeselectedArea()}},s.rightYAxisLabel=function(a,b){return arguments.length?(y=a,s.margins().right-=z,z=void 0===b?r:b,s.margins().right+=z,s):y},s.compose=function(a){return t=a,t.forEach(function(a){a.height(s.height()),a.width(s.width()),a.margins(s.margins()),w&&a.title(s.title()),a.options(u)}),s},s.children=function(){return t},s.shareColors=function(a){return arguments.length?(v=a,s):v},s.shareTitle=function(a){return arguments.length?(w=a,s):w},s.rightY=function(a){return arguments.length?(p=a,s.rescale(),s):p},delete s.yAxisMin,delete s.yAxisMax,dc.override(s,"xAxisMin",function(){return dc.utils.subtract(d3.min(n()),s.xAxisPadding())}),dc.override(s,"xAxisMax",function(){return dc.utils.add(d3.max(o()),s.xAxisPadding())}),s.legendables=function(){return t.reduce(function(a,b){return v&&b.colors(s.colors()),a.push.apply(a,b.legendables()),a},[])},s.legendHighlight=function(a){for(var b=0;b<t.length;++b){var c=t[b];c.legendHighlight(a)}},s.legendReset=function(a){for(var b=0;b<t.length;++b){var c=t[b];c.legendReset(a)}},s.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},s.rightYAxis=function(a){return arguments.length?(x=a,s):x},s.anchor(a,b)},dc.customSeriesChart=function(a,b){function c(a,b){return d3.ascending(g.keyAccessor()(a),g.keyAccessor()(b))}function d(a){h[a].g()&&h[a].g().remove(),delete h[a]}function e(){Object.keys(h).map(d),h={}}var f,g=dc.compositeChart(a,b),h={},i=dc.lineChart,j=d3.ascending,k=c;return g._mandatoryAttributes().push("seriesAccessor","chart"),g.shareColors(!0),g._preprocessData=function(){var a,c=[],e=d3.nest().key(f);j&&e.sortKeys(j),k&&e.sortValues(k);var l=e.entries(g.data()),m=l.map(function(d,e){var f=h[d.key]||i.call(g,g,b,d.key,e);return h[d.key]||(a=!0),h[d.key]=f,c.push(d.key),f.dimension(g.dimension()).group({all:d3.functor(d.values)},d.key).keyAccessor(g.keyAccessor()).valueAccessor(g.valueAccessor())});Object.keys(h).filter(function(a){return-1===c.indexOf(a)}).forEach(function(b){d(b),a=!0}),g._compose(m),a&&g.legend()&&g.legend().render()},dc.override(g,"_filter",function(a){return arguments.length?g.__filter(dc.filters.RangedTwoDimensionalFilter(a)):g.__filter()}),g.setHandlePaths=function(){},g.extendBrush=function(){var a=g.brush().extent();return g.round()&&(a[0]=a[0].map(g.round()),a[1]=a[1].map(g.round()),g.g().select(".brush").call(g.brush().extent(a))),a},g.brushIsEmpty=function(a){return g.brush().empty()||!a||a[0][0]>=a[1][0]||a[0][1]>=a[1][1]},g._brushing=function(){var a=g.extendBrush();if(g.redrawBrush(g.g()),g.brushIsEmpty(a))dc.events.trigger(function(){g.replaceFilter(null),g.redrawGroup()});else{var b=dc.filters.RangedTwoDimensionalFilter(a);dc.events.trigger(function(){g.replaceFilter(b),g.redrawGroup()},dc.constants.EVENT_DELAY)}},g.setBrushY=function(a){a.call(g.brush().y(g.y()))},g.chart=function(a){return arguments.length?(i=a,e(),g):i},g.seriesAccessor=function(a){return arguments.length?(f=a,e(),g):f},g.seriesSort=function(a){return arguments.length?(j=a,e(),g):j},g.valueSort=function(a){return arguments.length?(k=a,e(),g):k},g._compose=g.compose,delete g.compose,g},dc.customScatterPlot=function(a,b){function c(a,b){var c=e.selectAll(".chart-body path.symbol").filter(function(){return a(d3.select(this))}),d=f.size();f.size(Math.pow(b,2)),dc.transition(c,e.transitionDuration()).attr("d",f),f.size(d)}function d(a){var b=e.selectAll(".chart-body path.symbol").each(function(b){this.filtered=a&&a.isFiltered(b.key)});dc.transition(b,e.transitionDuration()).attr("d",f)}var e=dc.coordinateGridMixin({}),f=d3.svg.symbol(),g=function(a){return a.value},h=e.keyAccessor();e.keyAccessor(function(a){return h(a)[0]}),e.valueAccessor(function(a){return h(a)[1]}),e.colorAccessor(function(){return e._groupName});var i=function(a){return"translate("+e.x()(e.keyAccessor()(a))+","+e.y()(e.valueAccessor()(a))+")"},j=3,k=5,l=0;return f.size(function(a){return g(a)?this.filtered?Math.pow(k,2):Math.pow(j,2):l}),dc.override(e,"_filter",function(a){return arguments.length?e.__filter(dc.filters.RangedTwoDimensionalFilter(a)):e.__filter()}),e.plotData=function(){var a=e.chartBodyG().selectAll("path.symbol").data(e.data());a.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",e.getColor).attr("transform",i),dc.transition(a,e.transitionDuration()).attr("opacity",function(a){return g(a)?1:0}).attr("fill",e.getColor).attr("transform",i).attr("d",f),dc.transition(a.exit(),e.transitionDuration()).attr("opacity",0).remove()},e.existenceAccessor=function(a){return arguments.length?(g=a,this):g},e.symbol=function(a){return arguments.length?(f.type(a),e):f.type()},e.symbolSize=function(a){return arguments.length?(j=a,e):j},e.highlightedSize=function(a){return arguments.length?(k=a,e):k},e.hiddenSize=function(a){return arguments.length?(l=a,e):l},e.legendables=function(){return[{chart:e,name:e._groupName,color:e.getColor()}]},e.legendHighlight=function(a){c(function(b){return b.attr("fill")===a.color},k),e.selectAll(".chart-body path.symbol").filter(function(){return d3.select(this).attr("fill")!==a.color}).classed("fadeout",!0)},e.legendReset=function(a){c(function(b){return b.attr("fill")===a.color},j),e.selectAll(".chart-body path.symbol").filter(function(){return d3.select(this).attr("fill")!==a.color}).classed("fadeout",!1)},e.setHandlePaths=function(){},e.extendBrush=function(){var a=e.brush().extent();return e.round()&&(a[0]=a[0].map(e.round()),a[1]=a[1].map(e.round()),e.g().select(".brush").call(e.brush().extent(a))),a},e.brushIsEmpty=function(a){return e.brush().empty()||!a||a[0][0]>=a[1][0]||a[0][1]>=a[1][1]},e._brushing=function(){var a=e.extendBrush();if(e.redrawBrush(e.g()),e.brushIsEmpty(a))dc.events.trigger(function(){e.filter(null),e.redrawGroup()}),d(!1);else{var b=dc.filters.RangedTwoDimensionalFilter(a);dc.events.trigger(function(){e.filter(null),e.filter(b),e.redrawGroup()},dc.constants.EVENT_DELAY),d(b)}},e.setBrushY=function(a){a.call(e.brush().y(e.y()))},e.anchor(a,b)},dc.customBubbleMixin=function(a){var b=.3,c=10;a.BUBBLE_NODE_CLASS="node",a.BUBBLE_CLASS="bubble",a.MIN_RADIUS=10,a=dc.colorMixin(a),a.renderLabel(!0),a.data(function(a){return a.top(1/0)});var d=d3.scale.linear().domain([0,100]),e=function(a){return a.r};a.r=function(b){return arguments.length?(d=b,a):d},a.radiusValueAccessor=function(b){return arguments.length?(e=b,a):e},a.rMin=function(){var b=d3.min(a.data(),function(b){return a.radiusValueAccessor()(b)});return b},a.rMax=function(){var b=d3.max(a.data(),function(b){return a.radiusValueAccessor()(b)});return b},a.bubbleR=function(b){var c=a.radiusValueAccessor()(b),d=a.r()(c);return(isNaN(d)||0>=c)&&(d=0),d};var f=function(b){return a.label()(b)},g=function(b){return a.bubbleR(b)>c?1:0};a._doRenderLabel=function(b){a.y().range().length,a.effectiveHeight();if(a.renderLabel()){var c=b.select("text");c.empty()&&(c=b.append("text").attr("class","bubble-text").attr("dx",".3em").attr("transform","rotate(-45) translate(5,0) ").attr("text-anchor","left").attr("dy",".3em").on("click",a.onClick)),c.attr("opacity",0).text(f),dc.transition(c,a.transitionDuration()).attr("opacity",g)}},a.doUpdateLabels=function(b){if(a.renderLabel()){var c=b.selectAll("text").text(f);dc.transition(c,a.transitionDuration()).attr("opacity",g)}};var h=function(b){return a.title()(b)};return a._doRenderTitles=function(b){if(a.renderTitle()){var c=b.select("title");c.empty()&&b.append("title").text(h)}},a.doUpdateTitles=function(b){a.renderTitle()&&b.selectAll("title").text(h)},a.minRadius=function(b){return arguments.length?(a.MIN_RADIUS=b,a):a.MIN_RADIUS},a.minRadiusWithLabel=function(b){return arguments.length?(c=b,a):c},a.maxBubbleRelativeSize=function(c){return arguments.length?(b=c,a):b},a.fadeDeselectedArea=function(){a.hasFilter()?a.selectAll("g."+a.BUBBLE_NODE_CLASS).each(function(b){a.isSelectedNode(b)?a.highlightSelected(this):a.fadeDeselected(this)}):a.selectAll("g."+a.BUBBLE_NODE_CLASS).each(function(){a.resetHighlight(this)})},a.isSelectedNode=function(b){return a.hasFilter(b.key)},a.onClick=function(b){var c=b.key;dc.events.trigger(function(){a.filter(c),a.redrawGroup()})},a},dc.customBubbleChart=function(a,b){function c(a){var b=i.y().range();a.empty()&&(a=i.chartBodyG().insert("g",":first-child").attr("class","grid-line horizontal").attr("transform","translate("+i.margins().left+","+i.margins().top+")"));var c=a.selectAll("line").data(b),d=c.enter().append("line").attr("x1",-i.margins().left).attr("y1",function(a){return a}).attr("x2",i.xAxisLength()).attr("y2",function(a){return a}).attr("opacity",1);dc.transition(d,i.transitionDuration()).attr("opacity",1),dc.transition(c,i.transitionDuration()).attr("x1",-i.margins().left).attr("y1",function(a){return a}).attr("x2",i.xAxisLength()).attr("y2",function(a){return a}),c.exit().remove()}function d(a){var b=a.enter().append("g");b.attr("class",i.BUBBLE_NODE_CLASS).attr("transform",k).append("circle").attr("class",function(a,b){return i.BUBBLE_CLASS+" _"+b}).on("click",i.onClick).attr("fill",i.getColor).attr("r",0),dc.transition(a,i.transitionDuration()).selectAll("circle."+i.BUBBLE_CLASS).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i._doRenderLabel(b),i._doRenderTitles(b)}function e(a){dc.transition(a,i.transitionDuration()).attr("transform",k).selectAll("circle."+i.BUBBLE_CLASS).attr("fill",i.getColor).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i.doUpdateLabels(a),i.doUpdateTitles(a)}function f(a){a.exit().remove()}function g(a){var b=i.x()(i.keyAccessor()(a));return isNaN(b)&&(b=0),b}function h(a){var b=i.y().range().length,c=i.effectiveHeight(),d=c/b,e=i.y()(i.valueAccessor()(a));return isNaN(e)&&(e=0),dc.utils.safeNumber(e+.5*d)}var i=dc.customBubbleMixin(dc.coordinateGridMixin({})),j=!1;i.transitionDuration(750);var k=function(a){return"translate("+g(a)+","+h(a)+")"};return i.elasticRadius=function(a){return arguments.length?(j=a,i):j},i.plotData=function(){j&&i.r().domain([i.rMin(),i.rMax()]),i.r().range([i.MIN_RADIUS,i.xAxisLength()*i.maxBubbleRelativeSize()]);var a=i.chartBodyG().selectAll("g.horizontal");c(a);var b=i.chartBodyG().selectAll("g."+i.BUBBLE_NODE_CLASS).data(i.data(),function(a){return a.key});d(b),e(b),f(b),i.fadeDeselectedArea()},i.renderBrush=function(){},i.redrawBrush=function(){},i.anchor(a,b)},dc.subwayChart=function(a,b){function c(a,b,c,d){this.x=a,this.yRaw=b,this.value=c,this.visible=d}function d(a,b){this.lineID=a,this.stations=b,this.segments=[]}function e(a,b){return void 0===b[a.x]?b[a.x]=[a]:b[a.x].push(a),b}function f(a){var b=Object.keys(a);b.sort(function(a,b){return new Date(a)-new Date(b)});var c=[];return b.forEach(function(b){a[b].forEach(function(a){a.yRaw.forEach(function(a){c.indexOf(a)<0&&c.push(a)})})}),c}function g(a){return!a||a.indexOf("NaN")>=0||a.indexOf("Infinity")>=0?"M0,0":a}function h(a){a.enter().insert("g",":first-child").attr("stroke",function(a){return r.getColor(a.lineID)}).attr("class",function(a,b){return"subway-line _"+b});var b=a.selectAll("path.diagonal").data(function(a){return a.segments});b.enter().insert("path").attr("class","diagonal").attr("stroke-opacity",function(a){return 1}),b.exit().remove(),a.exit().remove()}function i(a){var b=a.selectAll("path.diagonal").data(function(a){return a.segments});dc.transition(b,r.transitionDuration()).attr("d",function(a){var b,c={x:F(a.source.x),y:G(a.source.yRaw)};if(a.source.visible&&a.target.visible)return b={x:F(a.target.x),y:G(a.target.yRaw)},g(E({source:c,target:b}));if(a.source.visible&&!a.target.visible)for(var d=a.nextSegment;void 0!==d;){if(d.target.visible)return b={x:F(d.target.x),y:G(d.target.yRaw)},g(E({source:c,target:b}));d=d.nextSegment}}).attr("stroke-opacity",function(a){return 1}),b.exit().remove(),a.exit().remove()}function j(a){var b=a.selectAll("path.diagonal").data(function(a){return a.segments});b.exit().remove(),a.exit().remove()}function k(a){var b=a.enter().append("g");b.attr("class",r.BUBBLE_NODE_CLASS).attr("transform",v).append("ellipse").attr("class",function(a,b){return r.BUBBLE_CLASS+" _"+b}).on("click",r.onClick).attr("width",0).attr("height",0),dc.transition(a,r.transitionDuration()).selectAll("ellipse."+r.BUBBLE_CLASS).attr("ry",function(a){return r.bubbleR(a)}).attr("rx",function(a){return r.minRadius()}).attr("opacity",function(a){return r.bubbleR(a)>0?1:0}),r._doRenderLabel(b),r._doRenderTitles(b)}function l(a){dc.transition(a,r.transitionDuration()).attr("transform",v).selectAll("ellipse."+r.BUBBLE_CLASS).attr("ry",function(a){return r.bubbleR(a)}).attr("rx",function(a){return r.minRadius()}).attr("opacity",function(a){return r.bubbleR(a)>0?1:0}),r.doUpdateLabels(a),r.doUpdateTitles(a)}function m(a){a.exit().remove()}function n(a){var b=r.x()(r.keyAccessor()(a));return isNaN(b)&&(b=0),b}function o(a){var b=x(r.keyAccessor()(a),{yRaw:r.valueAccessor()(a)});return b}var p,q,r=dc.customBubbleMixin(dc.stackMixin(dc.coordinateGridMixin({}))),s=!1,t="monotone",u=.1;r.BUBBLE_CLASS="subwayBubble";r.transitionDuration(750);var v=function(a){return"translate("+n(a)+","+o(a)+")"};r.elasticRadius=function(a){return arguments.length?(s=a,r):s};var w,x=function(a,b){for(var c=r.y().range().length,d=r.effectiveHeight(),e=d/c,f=0,g=r.y().domain(),h=0;h<g.length;h++)b.yRaw.indexOf(g[h])>=0&&(f=r.y()(g[h]));var i=f;isNaN(i)&&(i=0);var j=dc.utils.safeNumber(i+.5*e);return j},y=function(a){var b=[];return a.forEach(function(a){if(a.value.count>0){a.key[0];b.push({key:a.key,value:a.value})}}),b},z=function(a){var b={};return a.forEach(function(a){if(a.value.count>0){var d=a.key[0],f=r.valueAccessor()(a),g=r.radiusValueAccessor()(a);e(new c(new Date(d),f,g,!0),b)}}),b},A=function(a,b){var f={};a.forEach(function(a){void 0===f[a]&&(f[a]=new d(a,{})),e(new c(new Date(-864e13),[a],1,!0),f[a].stations),e(new c(new Date(864e13),[a],1,!0),f[a].stations)}),Object.keys(b).forEach(function(a){Object.keys(b[a]).forEach(function(c){var d=b[a][c],g=d.yRaw;g.forEach(function(a){e(d,f[a].stations)})})});var g=Object.keys(f).map(function(a){return f[a]});return g},B=function(a,b){var c=!0;return a.x.getTime()!==b.x.getTime()&&(c=!1),a.yRaw!==b.yRaw&&(c=!1),a.value!==b.value&&(c=!1),c},C=function(a,b,c){return this.visibleStations=[],this.visibleTimeStrings=Object.keys(c),this.visibleTimeStrings.forEach(function(a){this.visibleStations=this.visibleStations.concat(c[a])}),this.visibleTimeStrings.push(new Date(864e13).toString()),this.visibleTimeStrings.push(new Date(-864e13).toString()),this.visibleDomain=b,a.forEach(function(a){var b=a.stations,c=Object.keys(b);c.forEach(function(a){this.currentDate=a;var c=b[a];Object.keys(c).forEach(function(a){var b=c[a],d=!1;b.yRaw.forEach(function(a){this.visibleDomain.indexOf(a)>=0&&(d=!0)}.bind(this));var e=!1;this.visibleStations.forEach(function(a){B(a,b)&&(e=!0)}),e?b.visible=!0:d&&this.currentDate===new Date(864e13).toString()||this.currentDate===new Date(-864e13).toString()?b.visible=!0:b.visible=!1}.bind(this))}.bind(this))}.bind(this)),a},D=function(a,b){var c=function(a,c){return b.indexOf(a.yRaw[0])-b.indexOf(c.yRaw[0])};return a.forEach(function(a){var b=Object.keys(a.stations);b.sort(function(a,b){return new Date(a)-new Date(b)});for(var d=b.length,e=a.stations[b[0]][0],f=null,g=1;d>g;g++){var h=b[g],i=a.stations[h];i.sort(c);for(var j=i.length,k=0;j>k;k++){var l={source:e,target:i[k]};a.segments.push(l),e=i[k],null!==f&&(f.nextSegment=l,l.lastSegment=f),f=l}}}),a},E=d3.svg.diagonal().source(function(a){return{x:a.source.y,y:a.source.x}}).target(function(a){return{x:a.target.y,y:a.target.x}}).projection(function(a){return[a.y,a.x]}),F=function(a){var b=r.x()(a);return 0>b?b=0:b>r.x().range()[1]&&(b=r.x().range()[1]),b},G=function(a){var b=x(null,{yRaw:a}),c=r.y().range();return c.sort(function(a,b){return b-a}),0>b?b=0:b>c[c.length]&&(b=c[c.length]),b},H=!1;return r.plotData=function(){var a=y(r.data()),b=z(a),c=f(b);r.y().domain(c),H?C(w,c,b):(w=A(c,b),w=C(w,c,b),w=D(w,c),H=!0);var d=r.chartBodyG().selectAll("g.subway-line").data(w);h(d),i(d),j(d),s&&r.r().domain([r.rMin(),r.rMax()]),r.r().range([r.MIN_RADIUS,r.xAxisLength()*r.maxBubbleRelativeSize()]);var e=r.chartBodyG().selectAll("g."+r.BUBBLE_NODE_CLASS).data(a,function(a){return a.key});k(e),l(e),m(e),r.rescale(),r.fadeDeselectedArea()},r.interpolate=function(a){return arguments.length?(t=a,r):t},r.tension=function(a){return arguments.length?(u=a,r):u},r.defined=function(a){return arguments.length?(p=a,r):p},r.dashStyle=function(a){return arguments.length?(q=a,r):q},r.renderBrush=function(){},r.redrawBrush=function(){},
r.anchor(a,b)},dc.laneChart=function(a,b){function c(){if(!t||u){var a=d3.extent(v,G.cappedValueAccessor);a[0]>0&&(a[0]=0),t=d3.scale.linear().domain(a).range([0,G.effectiveWidth()])}H.scale(t)}function d(){var a=s.select("g.axis");c(),a.empty()&&(a=s.append("g").attr("class","axis")),a.attr("transform","translate(0, "+G.effectiveHeight()+")"),dc.transition(a,G.transitionDuration()).call(H)}function e(){s.selectAll("g.tick").select("line.grid-line").remove(),s.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-G.effectiveHeight()})}function f(){v=G.data(),d(),e();var a=s.selectAll("g."+D).data(v);g(a),h(a),j(a)}function g(a){var b=a.enter().append("g").attr("class",function(a,b){return D+" _"+b});b.append("rect").attr("width",0),l(b),m(a)}function h(a){a.exit().remove()}function i(){var a=t(0);return a===-(1/0)||a!==a?t(1):a}function j(a){var b,c=v.length;b=C?C:(G.effectiveHeight()-(c+1)*B)/c,y||(x=b/2);var d=a.attr("transform",function(a,c){return"translate(0,"+((c+1)*B+c*b)+")"}).select("rect").attr("height",b).attr("fill",G.getColor).on("click",n).classed("deselected",function(a){return G.hasFilter()?!p(a):!1}).classed("selected",function(a){return G.hasFilter()?p(a):!1});dc.transition(d,G.transitionDuration()).attr("width",function(a){return Math.abs(i()-t(G.valueAccessor()(a)))}).attr("transform",o),k(a),m(a)}function k(a){G.renderTitle()&&(a.selectAll("title").remove(),a.append("title").text(G.title()))}function l(a){G.renderLabel()&&a.append("text").on("click",n),G.renderTitleLabel()&&a.append("text").attr("class",E).on("click",n)}function m(a){if(G.renderLabel()){var b=a.select("text").attr("x",w).attr("y",x).attr("dy",z).on("click",n).attr("class",function(a,b){return D+" _"+b}).text(function(a){return G.label()(a)});dc.transition(b,G.transitionDuration()).attr("transform",o)}if(G.renderTitleLabel()){var c=a.select("."+E).attr("x",G.effectiveWidth()-A).attr("y",x).attr("text-anchor","end").on("click",n).attr("class",function(a,b){return E+" _"+b}).text(function(a){return G.title()(a)});dc.transition(c,G.transitionDuration()).attr("transform",o)}}function n(a){G.onClick(a)}function o(a){var b=t(G.cappedValueAccessor(a)),c=i(),d=b>c?c:b;return"translate("+d+",0)"}function p(a){return G.hasFilter(G.cappedKeyAccessor(a))}function q(a){J[a].g()&&J[a].g().remove(),delete J[a]}function r(){Object.keys(J).map(q),J={}}var s,t,u,v,w=10,x=15,y=!1,z="0.35em",A=2,B=5,C=!1,D="row",E="titlerow",F=!1,G=dc.capMixin(dc.marginMixin(dc.colorMixin(dc.baseMixin({})))),H=d3.svg.axis().orient("bottom");G.rowsCap=G.cap,G._doRender=function(){return G.resetSvg(),s=G.svg().append("g").attr("transform","translate("+G.margins().left+","+G.margins().top+")"),f(),G},G.title(function(a){return G.cappedKeyAccessor(a)+": "+G.cappedValueAccessor(a)}),G.label(G.cappedKeyAccessor),G.x=function(a){return arguments.length?(t=a,G):t},G.renderTitleLabel=function(a){return arguments.length?(F=a,G):F},G._doRedraw=function(){return f(),G},G.xAxis=function(){return H},G.fixedBarHeight=function(a){return arguments.length?(C=a,G):C},G.gap=function(a){return arguments.length?(B=a,G):B},G.elasticX=function(a){return arguments.length?(u=a,G):u},G.labelOffsetX=function(a){return arguments.length?(w=a,G):w},G.labelOffsetY=function(a){return arguments.length?(x=a,y=!0,G):x},G.titleLabelOffsetX=function(a){return arguments.length?(A=a,G):A};var I,J={};dc.lineChart,d3.ascending;return G.seriesAccessor=function(a){return arguments.length?(I=a,r(),G):I},G.anchor(a,b)},dc.dyndomBubbleChart=function(a,b){function c(a,b){this.x=a,this.y=b}function d(a){var b=Object.keys(a);b.sort(function(a,b){return new Date(a)-new Date(b)});var c=[];return b.forEach(function(b){a[b].forEach(function(a){c.indexOf(a.y)<0&&c.push(a.y)})}),c}function e(a){var b=k.y().range();a.empty()&&(a=k.chartBodyG().insert("g",":first-child").attr("class","grid-line horizontal").attr("transform","translate("+k.margins().left+","+k.margins().top+")"));var c=a.selectAll("line").data(b),d=c.enter().append("line").attr("x1",-k.margins().left).attr("y1",function(a){return a}).attr("x2",k.xAxisLength()).attr("y2",function(a){return a}).attr("opacity",1);dc.transition(d,k.transitionDuration()).attr("opacity",1),dc.transition(c,k.transitionDuration()).attr("x1",-k.margins().left).attr("y1",function(a){return a}).attr("x2",k.xAxisLength()).attr("y2",function(a){return a}),c.exit().remove()}function f(a){var b=a.enter().append("g");b.attr("class",k.BUBBLE_NODE_CLASS).attr("transform",m).append("circle").attr("class",function(a,b){return k.BUBBLE_CLASS+" _"+b}).on("click",k.onClick).attr("fill",k.getColor).attr("r",0),dc.transition(a,k.transitionDuration()).selectAll("circle."+k.BUBBLE_CLASS).attr("r",function(a){return k.bubbleR(a)}).attr("opacity",function(a){return k.bubbleR(a)>0?1:0}),k._doRenderLabel(b),k._doRenderTitles(b)}function g(a){dc.transition(a,k.transitionDuration()).attr("transform",m).selectAll("circle."+k.BUBBLE_CLASS).attr("fill",k.getColor).attr("r",function(a){return k.bubbleR(a)}).attr("opacity",function(a){return k.bubbleR(a)>0?1:0}),k.doUpdateLabels(a),k.doUpdateTitles(a)}function h(a){a.exit().remove()}function i(a){var b=k.x()(k.keyAccessor()(a));return isNaN(b)&&(b=0),b}function j(a){var b=k.y().range().length,c=k.effectiveHeight(),d=c/b,e=k.y()(k.valueAccessor()(a));return isNaN(e)&&(e=0),dc.utils.safeNumber(e+.5*d)}var k=dc.customBubbleMixin(dc.coordinateGridMixin({})),l=(d3.svg.symbol().type("triangle-up").size(function(a){return 20*k.bubbleR(a)}),d3.svg.symbol().type("circle").size(function(a){return 20*k.bubbleR(a)}),!1);k.transitionDuration(750);var m=function(a){return"translate("+i(a)+","+j(a)+")"},n=function(a){var b=[];return a.forEach(function(a){a.key[1].forEach(function(c){b.push({key:[a.key[0],c],value:a.value})})}),b},o=function(a){var b={};return a.forEach(function(a){if(k.radiusValueAccessor()(a)>0){var d=a.key[0],e=k.valueAccessor()(a),f=new c(new Date(d),e);void 0===b[f.x]?b[f.x]=[f]:b[f.x].push(f)}}),b};return k.elasticRadius=function(a){return arguments.length?(l=a,k):l},k.fadeDeselectedArea=function(){k.hasFilter()?k.selectAll("g.dyndom_node").each(function(a){k.isSelectedNode(a)?k.highlightSelected(this):k.fadeDeselected(this)}):k.selectAll("g.dyndom_node").each(function(){k.resetHighlight(this)})},k.plotData=function(){var a=n(k.data()),b=o(a),c=d(b);k.y().domain(c),l&&k.r().domain([k.rMin(),k.rMax()]),k.r().range([k.MIN_RADIUS,k.xAxisLength()*k.maxBubbleRelativeSize()]);var i=k.chartBodyG().selectAll("g.horizontal");e(i);var j=k.chartBodyG().selectAll("g."+k.BUBBLE_NODE_CLASS).data(a,function(a){return a.key});f(j),g(j),h(j),k.rescale(),k.fadeDeselectedArea()},k.renderBrush=function(){},k.redrawBrush=function(){},k.anchor(a,b)},function(){"use strict";function a(a,b,c){var d=this;this.query=b.DATA_JSON_URL,this.clear=function(){d.query=b.DATA_JSON_URL,d.open()},this.open=function(){a.ready.then(function(){c.publish("data request",d.query)})},this.search=function(){d.open()},this.onQueryKeyPress=function(a){var b=13;a.keyCode===b&&d.open()}}a.$inject=["DataService","uncertConf","Messagebus"],angular.module("uncertApp.fileLoading").controller("FileController",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"scripts/fileloading/fileLoading.directive.html",controller:"FileController",controllerAs:"fc"}}angular.module("uncertApp.fileLoading").directive("fileLoadingDirective",a)}(),function(){"use strict";function a(a,b,c){var d=this;d.charts={},d.filters=[],this.click=function(a){var b="";d.filters.forEach(function(c){c.filterString===a.filterString&&(b=c)}),c.publish("filterThis",{chart:d.charts[a.chartID],filters:b.filter})},c.subscribe("filterThis",function(a,c){var d=c.chart,e=c.filters;b.events.trigger(function(){d.filter(e),d.redrawGroup()})}),c.subscribe("clearFilters",function(){d.charts={},d.filters=[]}),c.subscribe("newFilterEvent",function(b,c){var e=c[0].chartID(),f=c[0],g=c[2];d.charts[e]=f,a.$evalAsync(function(){d.filters=[];var a=Object.keys(d.charts);a.forEach(function(a){d.charts[a].filters().forEach(function(b){d.filters.push({chartID:a,filter:b,filterString:b.toString(),dimension:g})})})})})}a.$inject=["$scope","dc","Messagebus"],angular.module("uncertApp.breadcrumbs").controller("BreadcrumbsController",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"scripts/breadcrumbs/breadcrumbs.directive.html",controller:"BreadcrumbsController",controllerAs:"bc"}}angular.module("uncertApp.breadcrumbs").directive("breadcrumbsDirective",a)}(),function(){"use strict";function a(a,b){var c=function(a){return a.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[])};this.determineUniqueActors=function(a){var b=[],d=Object.keys(a.actors);0===d.length?b.push("none"):d.forEach(function(c){var d=a.actors[c];d.forEach(function(a){var c=a.split(":");if(c.length>1){var d=c[0],e=c[1];"nwr-non-entities"===d||"ne"===d||b.push(d+":"+e)}else b.push(c[0])})});var e=c(b);return e},this.determineUniqueSources=function(a){var b=[],d=Object.keys(a.mentions);0===d.length?b.push("none"):d.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.source;"string"==typeof c&&(c=[c]),c.forEach(function(a){b.push(a)})})});var e=c(b);return e},this.determineUniqueCitationSources=function(a){var b=[],d=Object.keys(a.mentions);0===d.length?b.push("none"):d.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.source;"string"==typeof c&&(c=[c]),c.forEach(function(a){var c=a.split(":");"cite"===c[0]&&b.push(c[1])})})});var e=c(b);return e},this.determineUniqueAuthors=function(a){var b=[],d=Object.keys(a.mentions);0===d.length?b.push("none"):d.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.source;"string"==typeof c&&(c=[c]),c.forEach(function(a){var c=a.split(":");"author"===c[0]&&b.push(c[1])})})});var e=c(b);return e},this.filterFunction=function(a,b){return a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a>=d&&d>=a)return!0}return!1}),b},this.customDefaultFilterHandler=function(a,c){return b.publish("newFilterEvent",[this,c,a]),this.filterFunction(a,c)}.bind(this),this.symbolScale=a.scale.ordinal().range(a.svg.symbolTypes),this.mentionToTxt=function(a){var b=a.mentions,c="";return b.forEach(function(a){var b=a.snippet[0].substring(0,a.snippet_char[0]),d=a.snippet[0].substring(a.snippet_char[0],a.snippet_char[1]),e=a.snippet[0].substring(a.snippet_char[1],a.snippet[0].length);c+=b+d+e+"\n"}),c},this.buildDimensionWithProperties=function(a,b){var c=a.buildDimension(function(a){var c=[];return b.forEach(function(b){var d=b.split(".");1===d.length?a[d[0]]instanceof Array?a[d[0]].forEach(function(a){c.push(a)}):c.push(a[d[0]]):2===d.length&&(a[d[0]]instanceof Array?a[d[0]].forEach(function(b,e){a[d[0]][e][d[1]]instanceof Array?a[d[0]][e][d[1]].forEach(function(a){c.push(a)}):c.push(a[d[0]][e][d[1]])}):a[d[0]][d[1]]instanceof Array?a[d[0]][d[1]].forEach(function(a){c.push(a)}):c.push(a[d[0]][d[1]]))}),c}.bind(this));return c}.bind(this),this.setActorColors=function(a){this.actorColors=a},this.getActorColors=function(){return this.actorColors},this.setGroupColors=function(a){this.groupColors=a},this.getGroupColors=function(){return this.groupColors},this.getOrdinalColors=function(){return["#d9a058","#9306f9","#15b6ff","#03c70e","#c21372","#107356","#ca1601","#6255c6","#cc9eb6","#fd76fa","#a5b403","#a74741","#56c06a","#496981","#616b0f","#ff8f08","#a7af8e","#0fbdc9","#8e4f88","#ba9cf2","#1c50ff","#fc83c5","#1d67b2","#7c5f52","#a61fc6","#a74a01","#cb053d","#1a7609","#ff8790","#a1b35d","#8eafc9","#ab309b","#d4a412","#49be9a","#8a5c25","#d59f88","#fd8d61","#74be31","#5d6a44","#a94165","#7a5c76","#8eabeb","#7745d9","#3f7130","#7eb6af","#695aa6","#e38ce5","#157175","#87b780","#27c54b","#bc3323","#baad3e","#2459e5","#beaa6c","#4ab8dd","#d397d1","#93535e","#b1aaa9","#5a6394","#f19543","#5e6863","#8a4ba7","#ec90b1","#8233ec","#aa3983","#b1a5d1","#963bba","#ee947c","#bf2754","#6f672b","#e1989d","#905740","#91b845","#2362c5","#7d6205","#0f6ba0","#c00489","#29c286","#426e5d","#a14e27","#fd7cdf","#81ba63","#b316ae","#ea9a17","#46710c","#cd0225","#bdad0b","#ba343c","#97a5ff","#974d70","#dda038","#e79967","#95570a","#78b89b","#7d6139","#07753d","#5ac213","#50bcae","#a109e0","#e587f9","#8fb918","#bfa881","#7a588e","#994595","#caa748","#c9a29c","#6bb2e4","#b5a6bd","#07c471","#a9b073","#146f87","#6daeff","#3f7044","#6e626a","#fe85ab","#576d29","#b33a4e","#61b8c2","#b93807","#6d654b","#61be7f","#cb94f9","#d4a174","#93b0b6","#64c04c","#a8b334","#7f4ac0","#aca3e5","#e88ecb","#4850ec","#ae432f","#ff8a76","#b6316b","#8c35d9","#1f7528","#65637b","#b6ae56","#9eafa2","#815b64","#a44853","#b8a995","#ba0d9b","#6944ec","#255dd9","#5f59b9","#5d51d9","#f18f9d","#89547c","#5062a6","#416c75","#d096e5","#9b3da7","#7f549a","#8c5852","#96acd7","#fd8f32","#53c23a","#91b48d","#43c25b","#db96bd","#a44277","#c60e60","#c7a92c","#6dbb8d","#af421a","#c42431","#7c2ff9","#6041f9","#fb8f4b","#b206ba","#c52315","#ea9852","#b22d89","#c99dca","#94b572","#f68e89","#f484d8","#cda55f","#5cb2f8","#3e6994","#14c0a7","#4b60b3","#2eb7f1","#acb146","#7255ad","#965434","#79bd44","#b4ac7a","#7650b9","#a333ad","#626a31","#6fb4d7","#17c639","#98541f","#3dbad0","#9437c6","#92b39b","#f39527","#6e5f82","#516c51","#5a6775","#6d645d","#81b3c3","#0f7363","#6d6802","#df9a8f","#9f4e3b","#2ac193","#b5355a","#4c6f37","#a3abc3","#cba0a9","#bd2e48","#de9c7b","#984b7c","#80601c","#5d6957","#a1a8de","#855d46","#c69bde","#4dbbbc","#4465a0","#9eb280","#645e9a","#885770","#556687","#97524d","#6b673f","#bfa2c3","#f589b7","#9aa7f2","#c7a48f","#426d69","#da99b0","#2e6c8d","#f282ec","#0e744a","#dc92d8","#9cb628","#bca0d7","#73bc71","#9eb54e","#4b7021","#f4935a","#b1b11d","#375ecc","#bb227d","#07bfb5","#c9094f","#e19e49","#69be5b","#7ebb54","#327417","#f6906f","#7b47cc","#8e44b3","#3cc422","#a416d3","#a726ba","#9022ec","#b73930","#85bb32","#327156","#8e4c94","#ea9490","#fe79ec","#4cc078","#9d4c5f","#91b764","#a24e18","#6fbf15","#6b681a","#8b5c14","#e89b30","#b09dff","#f49504","#b03f42","#5256d2","#b3ae65","#d2a537","#dfa014","#fc889d","#5ebca1","#7a632b","#7b5a82","#c8a674","#c9a90e","#7aafeb","#76641b","#a3acb6","#6fb9a8","#c2a957","#4f6e44","#bba5b0","#84aaff","#cba481","#79605e","#dc9e67","#e790be","#875c39","#72599a","#546e0d","#84b972","#dc8df3","#d6a349","#d59d9c","#5eb7d0","#b33277","#6d5e8e","#a63a8f","#a13c9b","#9e4389","#aba2f2","#80b88d","#2c7069","#7a6145","#08bbdd","#84b0d7","#80bc16","#e98bd8","#2e733d","#6c4fcc","#c52324","#9427e0","#75bb7f","#b04204","#f17ffa","#8db855","#cc0332","#bd2860","#4cc24b","#0ec55b","#bcad2b","#c2253d","#ac4059","#57be8d","#5549f3","#b33e22","#803cdf","#2154f2","#5e4edf","#b81c95","#435fbf","#ae29a1","#f9921b","#255bdf","#a9b156","#ef85e6","#e79b42","#9ab63c","#c6a93f","#a3456b","#b33665","#1968ac","#d9a223","#bfab47","#81acf8","#a6455f","#2164bf","#ff7fcb","#b03771","#f08ac4","#646288","#4fb6e4","#dc94cb","#31724a","#8c41c0","#aea7ca","#4755df","#b8381b","#416f50","#13c37f","#bb9ee5","#107620","#d990ec","#6fbd63","#855b58","#ab4621","#61694b","#ea9675","#9346a1","#e79782","#4fbf86","#387329","#5a6d19","#087081","#8251a0","#61c130","#7d5694","#9632cc","#a44b35","#995240","#8c47ad","#726538","#8c5664","#965064","#afab9b","#d79baa","#87aedd","#8bb3a8","#e295aa","#8f536a","#bda79c","#8bace4","#41679a","#82b4b5","#5a6c38","#73ba94","#b0ad87","#994f59","#bfa3b6","#8d5a33","#4f6a6f","#86b5a1","#066c9a","#676938","#336d81","#8c5282","#08726f","#885a4c","#63b9b5","#d39ac4","#a4b26c","#536b5d","#6e6176","#616669","#835f33","#d0a36d","#905176","#9db194","#d1a096","#a2aea8","#7a5e6a","#65656f","#716451","#b4ab8e","#696657","#8fb2af","#9d4f47","#3d64ac","#ee9660","#9e510c","#656a22","#ac433b","#97afbc","#a437a1","#86538e","#9c512d","#5159cc","#37c36a","#656751","#96488e","#257436","#abad95","#c0a5a2","#1bbae4","#456b7b","#94b832","#7bb986","#756258","#6157bf","#26b8ea","#92572d","#f7923b","#835588","#c599ec","#5d5bb3","#a93595","#ee9296","#b5af35","#e49d24","#5ebf71","#e08fdf","#bd9af9","#72b5c9","#b23e36","#2f6e7b","#4f5bc6","#91499b","#b1a8b6","#875e07","#f98b97","#7557a0","#8f5658","#8cb687","#73b6bc","#f29368","#99b479","#aeb05d","#f98d7c","#43c271","#bf2d37","#ec88df","#705c94","#85596a","#ad3c6b","#a04965","#cea721","#c6a866","#156aa6","#48bda7","#f38caa","#92add0","#76633f","#7eadf2","#a2a9d0","#aa444d","#58b3f1","#f487cb","#acae80","#58648e","#b92a71","#80b1d0","#8f591e","#c3a688","#89585e","#316f6f","#c1ab36","#f886be","#ea92a3","#85b694","#1f65b9","#815f3f","#b1af4e","#a04c4d","#e493b7","#a73e7d","#1fbebb","#bbac5e","#726611","#53b5eb","#5dbd93","#af3b5f","#cfa550","#a2b187","#cf9cbd","#9b4782","#c3ab1f","#ada0f9","#893ecc","#c02c2a","#c897f2","#ed983a","#824cb3","#5cc143","#ff8c53","#e39b60","#935546","#e689ec","#c12b0a","#28c462","#67bc86","#723bf3","#4852e6","#9117f3","#e19c6e","#5b5dac","#b43d11","#37c453","#8bba3c","#fd8a83","#675ca0","#7453b3","#6e4cd2","#f29183","#6847e6","#49c32f","#c12c1c","#44b9d6","#69bf3a","#bd3213","#8b3ad3","#4dc162","#804fad","#56c153","#41c343","#ab460f","#88ba4d","#c9171e","#c71937","#b5268f","#c61a43","#c01f66","#bd1783","#c31d5a","#c8182b","#b021a7","#a52db4","#1f52f9","#2357ec","#9e2fc0","#982cd3","#8138e6","#b83448","#fa80d8","#f1954b","#8f29e6","#255fd2","#6045f3","#a034b3","#ba2f5a","#9da5f9","#e49b59","#70be44","#7bbd3b","#995416","#7e40d9","#b62b7d","#b1b107","#7bbc5c","#3851f2","#a029c6","#a04677","#d7a240","#a82cad","#34740b","#7046df","#9836c0","#8736df","#793de6","#2cc610","#b018b4","#37c09a","#af3383","#ef8db7","#6bbe54","#a813cd","#a603d9","#457118","#7a4ac6","#a91dc0","#9c0fe6","#ca170d","#9925d9","#474af9","#7336f9","#8427f9","#a4b41b","#fc8f44","#832df3","#8842c6","#816013","#4fb2ff","#d8a05f","#8bb85c","#adb13e","#35b5f8","#784dc0","#07c642","#835394","#4d6e4a","#c41c54","#ef9659","#ba3336","#46688d","#24c378","#4a6f3e","#377150","#a74a18","#1a752f","#9ca8e4","#b5a4ca","#f187d2","#21bccf","#c99bd8","#676a01","#f99206","#73b2dd","#6e6732","#914f82","#8ab779","#b63554","#bf9ede","#f6924b","#e59975","#79614b","#8b5a40","#d997c4","#c69fc4","#805a76","#d995d1","#e4978f","#98b38e","#a64a27","#ab358f","#82b79b","#5360ac","#dc9c82","#92554c","#6d56b3","#b5a3d7","#bcaa73","#95553a","#f9905a","#855e25","#636945","#ab4347","#ca0849","#cc98de","#fe8f1c","#a6a7d7","#6abaa1","#55639a","#e9977c","#ed9482","#586c3e","#b79feb","#cda28f","#a6b346","#ad4335","#606b1a","#6f6545","#d79d96","#357330","#18c28c","#f581e6","#6b6088","#d1a182","#9b4f53","#87b96b","#bc0a95","#e58ed1","#7b54a0","#3660c5","#76bc6a","#4659d2","#1b6d8d","#b810a1","#d3a17b","#3d7057","#96459b","#c999e5","#796332","#b1a3de","#4abac9","#9a523a","#98b564","#417129","#65be78","#6954bf","#a34859","#8cb772","#c29ce5","#a04e34","#357244","#596681","#f09375","#6b58ad","#a7aabc","#e6959d","#91a9f2","#c20183","#9d511f","#f4951a","#457037","#cda47b","#ad4053","#d5a16d","#96b480","#79b7a8","#f58e90","#bc2e4e","#81b979","#9eb601","#95b755","#d395de","#5f5fa0","#79bb79","#8e5a2c","#a34b3b","#dc90e5","#4e6d57","#c1a87a","#bc2177","#5b6b4b","#98b645","#6eb7b5","#66b7c9","#d4a358","#48bf8d","#a3b356","#a0b279","#216c93","#4e6f30","#43bbc2","#b13e3c","#426a87","#785d7c","#b0289b","#e19d41","#ee9826","#97b1a2","#5ab6dd","#86b2bc","#56677b","#7e5d5e","#a0b53d","#197443","#d599bd","#5dbbae","#e591c4","#257163","#f59075","#b0ae73","#257256","#79579a","#85509a","#e09a89","#5d6c2a","#f89227","#695e94","#46c07f","#9db46b","#a24b47","#4d700d","#9b5134","#3c7237","#ef9801","#6bb5d0","#a43b95","#775b88","#bc1989","#8b5476","#e69b4a","#83577c","#686182","#eb966e","#1c7350","#526f22","#a8a4eb","#96b819","#a04383","#c69dd1","#8bb1c3","#c22543","#a8a0ff","#825d52","#c2a1bd","#905909","#477030","#35699a","#b9aa81","#6ab0f8","#dd98aa","#c5a948","#736532","#81afe4","#a8ad9b","#c8a1b0","#9faeaf","#d49bb0","#cda0a3","#bf1f6c","#f58ca4","#915364","#e096b0","#786404","#cba740","#94506a","#496794","#97adca","#b3a9a2","#476d63","#90acde","#536975","#b73066","#e892aa","#6b6463","#bbaa7a","#bea5a9","#c8a757","#64baa8","#646663","#766064","#aaaca9","#3d6e63","#5a6869","#60685d","#fc85b1","#74652b","#aeaaaf","#6fb1eb","#c1aa5e","#d99ba3","#5fb0ff","#b8ac6c","#7f612b","#69b9ae","#776339","#46bcb5","#3d6d6f","#775e70","#994d6a","#bfa795","#7b631c","#1b7169","#26bfae","#3867a0","#aaa9c3","#686469","#c2a873","#6b6370","#cfa710","#a6acaf","#616482","#a1af9b","#b6ac73","#d3a422","#805d58","#a2b272","#c2a3b0","#925170","#dea023","#3b714a","#73625e","#b6a99c","#da9e74","#7eb0dd","#9baeb6","#a4af95","#67665d","#536a69","#cfa09c","#4a6a75","#3b6c7b","#246e81","#6c6738","#74606a","#566b57","#d899b7","#fe8797","#6fba9a","#576a63","#57686f","#7db894","#c5a495","#c3ab0d","#755d82","#93afc3","#516781","#466c6f","#5eb4e4","#a9a5de","#b4a8af","#7db4bc","#9badc3","#716170","#5e657b","#caa66d","#a0b18e","#616575","#1e6f7b","#9ab19b","#aead8e","#725f7c","#7d5c70","#7c5e64","#93b2a8","#b8a6b6","#df98a3","#885c33","#dba049","#df9e58","#35bcc9","#256b9a","#87b4af","#c5a1b6","#3f63b3","#8e517c","#4c659a","#5d619a","#a7a9ca","#a4a6e4","#2c7250","#7a6058","#586b51","#7cb3c9","#c7a2a3","#8c5a3a","#2ac0a1","#aeae7a","#77b98d","#8fb3a2","#95b394","#835b5e","#b9a4c3","#4b6d5d","#7e6132","#1d725c","#bca2ca","#94aae4","#97b0af","#c7a67a","#85b1c9","#4e697b","#73634b","#bca4bd","#686831","#b7a7a9","#776252","#d697cb","#e39796","#954e76","#a64171","#bcac57","#b7af09","#626094","#636857","#d2a35f","#e89596","#de96b7","#c4a3a9","#53bac2","#5f6951","#4e63a0","#3f6b81","#9fadbc","#9fabca","#7e5f4c","#3ab4ff","#546c4b","#366e75","#8d5470","#755f76","#d09aca","#2cbdc2","#686375","#69682a","#b2a6c3","#aea8bd","#a14671","#a8b25d","#4b6c69","#7f5c6a","#64bb9a","#78b5c3","#77b1e4","#98505f","#aaaab6","#8ea7ff","#5cb9bc","#e495a3","#c3a59c","#5c6c31","#526594","#326a93","#74b8a1","#56bbb5","#e49d16","#8bb2b5","#99aade","#bba98e","#945358","#a6aea2","#8fb1bc","#adaba2","#6f6457","#9bb0a8","#daa213","#67b4dd","#abb06c","#d89f7b","#40bfa1","#3562bf","#c1a68e","#875b52","#71661b","#6b6651","#fb88a4","#5a6a5d","#baa7a2","#2f66ac","#2d715d","#716264","#a7b07a","#5e676f","#b7af1e","#67674b","#965253","#835d4c","#d39f8f","#cea374","#79acff","#865582","#b2ab95","#cba295","#825f39","#ae3877","#6b617c","#9c4f4d","#b9ad47","#616a38","#4f6b63","#676a0f","#536e19","#80568e","#5fc13a","#f88e83","#abb14e","#ae2f95","#386f69","#f87dec","#585abf","#24734a","#ab4619","#b23b54","#8ba9f8","#b8a0de","#94571e","#9e496b","#7841df","#a1495f","#39723d","#446f4a","#e59b51","#8a5a46","#985247","#674adf","#7755a7","#cc9cc4","#9e5117","#865776","#27c622","#c4a86d","#97b74d","#9b4d65","#45c339","#9c5127","#fa8b90","#a54b2e","#7fba6b","#914c8e","#915552","#8ab59b","#a64a20","#8343cc","#a83a89","#db9c89","#6c6810","#fb8d6f","#9c448f","#b1ae6c","#b23e2f","#b8a2d1","#8db932","#daa051","#83bb3b","#91573a","#7b6324","#ee9830","#eb83fa","#845e2c","#5ac063","#65693e","#985426","#a34b41","#b82f60","#7ab2d7","#c99fbd","#6bbf30","#d0a548","#ee8acb","#b43660","#aaa7d0","#50be93","#76aef8","#46b5f1","#8daed7","#6cbd6a","#895094","#a3427d","#eb9489","#ea90b7","#566c44","#b0b056","#b73929","#3a7321","#8a5c1d","#9a540b","#38c42f","#884ea1","#ef82f3","#c2ab2c","#935726","#63c124","#6857b9","#8e5a25","#dd9a96","#79bc63","#a5484d","#6659b3","#d693e5","#f983cb","#fb7de6","#4bb4f8","#66608e","#9eaad7","#6f53b9","#84adeb","#f38abe","#ed9667","#23706f","#57bca8","#c5a681","#2969a0","#445dc5","#f39531","#b0b12a","#20c62e","#f59352","#bc332a","#9cb555","#63bd8d","#645bad","#f780df","#296d87","#3b6a8d","#5546f9","#a9472f","#4f668e","#e291cb","#466e57","#a9b329","#ec9842","#6cbc7f","#4e5dbf","#5cbe86","#b33e29","#f2953a","#7151bf","#865d40","#f284df","#d99d8f","#adb065","#2ec542","#067628","#df8af9","#b9ac65","#d39da3","#6fbc78","#b2ac81","#9047a7","#9e4095","#9e4c59","#a9af87","#1dc469","#c4242b","#cfa288","#ce9eb0","#a2a4f2","#8e565e","#c6230b","#a138a7","#5958c6","#8449b9","#a54565","#3165b2","#7d4db9","#5352df","#636a2a","#c9a750","#aab31c","#3bbdbb","#ae4228","#96b56b","#497029","#c0aa65","#e3997b","#167616","#78be15","#a94453","#983ead","#9bb472","#92b83c","#3958df","#327337","#be2d3d","#bc331c","#455bcc","#a5b080","#745b8e","#a93d77","#ed8dbe","#ef9190","#eb8dc4","#c0264e","#8146c6","#7952ad","#4c5fb9","#a221cd","#9d39ad","#fe8f28","#bdad1e","#5b56cc","#277517","#c7a75e","#76b3d0","#fc8f3b","#7648d3","#2a7430","#c02c23","#8e3dc6","#f686c5","#a931a1","#7ebc26","#c39fca","#9db61a","#f57ef3","#86ba55","#296f75","#a5a2f9","#895288","#b29ff2","#4962ac","#f39361","#82bb44","#895c2c","#59b8c9","#9ab55d","#8a566a","#f783d2","#925733","#cea558","#48c253","#756524","#c8a920","#32beb5","#7b50b3","#855e1d","#b7ad4f","#5f4be6","#9040ba","#3bb8e4","#556d31","#7eb980","#67c043","#76be25","#89b68d","#8b5c08","#a64847","#af3f48","#e29d39","#89ba45","#f4917c","#9fa6eb","#a2b533","#beab4f","#fb7af3","#be9ceb","#abb305","#9c4a71","#91b679","#9942a1","#5761a0","#964b82","#3cc278","#b13b59","#f78b9d","#b93442","#137536","#62bf6a","#6b52c6","#8c4f8e","#df94c4","#de9e60","#61c054","#72aff1","#8fb680","#8eb594","#6ebe4c","#b3af46","#df9c75","#d1a540","#e693b0","#9fb364","#94a7f8","#72be3b","#d291f9","#d7a238","#a34e0d","#29750a","#2d7428","#9e4f41","#865e13","#875964","#bd3208","#ad1aba","#e38fd8","#9fb545","#6db6c2","#f79068","#c19af2","#307420","#9bb287","#80bb4c","#6dbf25","#be078f","#9e477d","#943fb3","#63b5d6","#df91d1","#c12549","#a3b429","#6a6823","#4c7018","#dea02f","#b72a77","#e39d2f","#d7a166","#9038cc","#5b6d0e","#8eb927","#52c071","#b83922","#8b4d9a","#b4af3e","#b513a7","#ae3f4e","#f1936e","#5ec05b","#297344","#506f29","#89afd0","#f38e97","#ab3d71","#58c223","#42703e","#b7354e","#94b487","#d098d8","#7e52a7","#b63936","#7058a6","#e6996e","#b04210","#75bd54","#ec929d","#a0a3ff","#c5231d","#905915","#6940f3","#dca041","#e89b39","#3c7217","#ac4341","#d79f82","#ba296c","#f79243","#944995","#b7ab88","#a6369b","#8d584c","#744bcc","#945540","#f09652","#97542d","#b43a48","#20743d","#4cc323","#e29a82","#b53a42","#8e5846","#5c53d2","#49c16a","#b5ae5e","#7d5888","#b1327d","#3fc186","#734ec6","#9642a7","#5abf78","#95b827","#546d37","#923cc0","#b42c83","#776411","#afb134","#9f4c53","#d5a350","#fa86b8","#826006","#cca737","#a13f8f","#f89232","#65bf63","#bb2e54","#2cbbd6","#fe8a7d","#79b6b5","#b5393c","#3ec362","#376b87","#c3a94f","#a53e83","#59c14b","#c32437","#fa8d76","#bc2866","#84ba5c","#565cb9","#c39dd7","#864bad","#b83812","#765994","#62b3eb","#b53d05","#d1a366","#b6af2a","#ada5d7","#7c6212","#f08fa4","#a8416b","#4a6e51","#337063","#9bb633","#d695d8","#69bb94","#bbad35","#a7b33d","#f789b1","#8a5858","#88bb17","#51bda1","#bda888","#ec85ec","#7d5a7c","#8d4aa1","#3fbeae","#484df2","#41b6ea","#50c243","#e89960","#5f6a3e","#a24e20","#d29cb7","#9c35ba","#52c15b","#74b7af","#55bf7f","#a04e2e","#a4b34e","#706623","#57bd9a","#945715","#40c093","#8645c0","#6c5c9a","#237520","#36c18c","#fc8d68","#71653f","#8fb84d","#bb3330","#cf94f2","#d8a22e","#e886f3","#d393ec","#3dc44b","#7cba72","#a74a0e","#fe8c5a","#1ec553","#e193be","#666a1a","#34c539","#cda72d","#fe82be","#9243ad","#aa4728","#756345","#4fb9d0","#77bd4c","#d88ef9","#ef9818","#f89061","#7db7a1","#93b75d","#595fa6","#ac0fc6","#b43171","#586d22","#6e5aa0","#b1376b","#a8473b","#35bfa7","#e29c67","#625da6","#c0ab3f","#65c114","#d992de","#ac4603","#eb984a","#835970","#38705d","#7b613f","#e69789","#a33f89","#4c6887","#02b7f8","#ad3489","#bf2c30","#66b1f1","#c12b14","#526d3e","#40c411","#5f628e","#82b5a8","#ab405f","#e989e5","#31c45b","#fd7fd2","#b4a1e5","#df8dec","#4161b9","#2460cc","#b02e8f","#3b66a6","#8848b3","#4ec312","#cc96ec","#18c19a","#e99b25","#db9b9c","#d3a52d","#9c419b","#a74459","#a632a7","#db9e6d","#9aabd0","#ac387d","#c497f9","#84b886","#ef88d8","#2c68a6","#a6b264","#fc8a8a","#a94735","#d19ea9","#bfa0d1","#e68cdf","#3e720b","#89b964","#68b8bc","#eb8bd2","#cba566","#c7a936","#5c6488","#56c22f","#9a3ab3","#f18cb1","#806124","#437121","#e28af3","#715d88","#34c27f","#bd2d42","#ee8faa","#2fc371","#844ea7","#f19189","#e09e51","#af0bc0","#97a8eb","#ca1716","#994888","#5f6c22","#9e3da1","#8a45b9","#9b4a76","#af4221","#afa1eb","#fa8f53","#88abf2","#86bb26","#726603","#6452cc","#8fb76b","#476f44","#696745","#7dbc31","#b43e1a","#72bd5c","#d591f2","#3363b9","#7f5f46","#b501b4","#b59df9","#4664a6","#be275a","#ae3c65","#69bd71","#555eb3","#cd9ad1","#805882","#55b7d6","#c9a488","#934e7c","#f988aa","#e99959","#34b9dd","#944b88","#72bb86","#5354d9","#6f49d9","#9b1ce0","#b51e9b","#8a24f3","#c11e60","#c11478","#3953ec","#8b1bf9","#9a31c6","#c80b55","#9e23d3","#6a3cf9","#b31fa1","#9c2bcd","#843fd3","#ae22ad","#a427c0","#b32795","#5f48ec","#ab24b4","#7a39ec","#961fe6","#544fe6","#cd032b","#a22eba","#b92383","#c91824","#ca0743","#bf167d","#cc0438","#664dd9","#544cec","#c81831","#b72489","#9133d3","#c51b49","#385cd2","#723fec","#7143e6","#4757d9","#9713ed","#3956e5","#a019d9","#c70d5a","#c41b4f","#ba1a8f","#6550d2","#c4116c","#8831e6","#7b34f3","#932ed9","#892bec","#7d44d3","#c51066","#395ad9","#ab2aa7","#c7193d","#f87afa","#853bd9","#cd011e","#be2072","#374ef9","#8e2fe0"]}}a.$inject=["d3","Messagebus"],angular.module("uncertApp.utils").service("HelperFunctions",a)}(),function(){"use strict";function a(a,b,c,d){this.data={},this.dimensions=[],this.pollDimensions=[];var e=a.defer();this.ready=e.promise,this.getData=function(){return this.data},this.getSize=function(){return this.ndx.size()},this.readData=function(a){this.data=a,this.ndx=b(a.timeline.events),d.POLLS&&(this.ndxPolls=b(a.timeline.polls)),c.publish("crossfilter ready",this.getData),e.resolve()},this.pollDimension=function(a){var b=null;return d.POLLS&&(b=this.ndxPolls.dimension(a),this.pollDimensions.push(b)),b},this.buildDimension=function(a){var b=this.ndx.dimension(a);return this.dimensions.push(b),b},this.resetData=function(){this.dimensions.forEach(function(a){a.filter(null),a.dispose()}),this.ndx.remove(),d.POLLS&&(this.pollDimensions.forEach(function(a){a.filter(null),a.dispose()}),this.ndxPolls.remove()),c.publish("clearFilters")},c.subscribe("data loaded",function(a,b){var c=b();this.ndx&&this.data&&c&&this.data!==c?(this.resetData(),this.readData(c)):this.readData(c)}.bind(this))}a.$inject=["$q","crossfilter","Messagebus","uncertConf"],angular.module("uncertApp.ndx").service("NdxService",a)}(),function(){"use strict";function a(a,b){a.tab=1;var c=angular.element(document.querySelector("#inventory-button"));c.addClass("black"),a.setTab=function(c){a.tab=c;var d="white",e="black";1==a.tab&&(d="black",e="white");var f=angular.element(document.querySelector("#storylines-button"));f.removeClass(e),f.addClass(d);var g=angular.element(document.querySelector("#relations-button"));g.removeClass(d),g.addClass(e);var g=angular.element(document.querySelector("#perspectives-button"));g.removeClass(d),g.addClass(e),2===c&&b.publish("changingToWrangler")},a.isSet=function(b){return a.tab===b}}a.$inject=["$scope","Messagebus"],angular.module("uncertApp.selector").controller("SelectorController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/selector/selector.directive.html",controller:"SelectorController",controllerAs:"s"}}angular.module("uncertApp.selector").directive("rigSelector",a)}(),function(){"use strict";function a(a,b,c,d){}a.$inject=["$timeout","$location","DataService","Messagebus"],angular.module("uncertApp.viewstorylines").controller("ViewStorylinesController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/viewstorylines/view.storylines.directive.html",controller:"ViewStorylinesController",controllerAs:"i"}}angular.module("uncertApp.viewstorylines").directive("viewStorylinesDirective",a)}(),function(){"use strict";function a(){}angular.module("uncertApp.viewrelations").controller("ViewRelationsController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/viewrelations/view.relations.directive.html",controller:"ViewRelationsController",
controllerAs:"i"}}angular.module("uncertApp.viewrelations").directive("viewRelationsDirective",a)}(),function(){"use strict";function a(){}angular.module("uncertApp.viewperspectives").controller("ViewPerspectivesController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/viewperspectives/view.perspectives.directive.html",controller:"ViewPerspectivesController",controllerAs:"vpc"}}angular.module("uncertApp.viewperspectives").directive("viewPerspectivesDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){this.initializeChart=function(){function h(a,b){var c=Object.keys(b.actors);return 0===c.length?a.none=(a.none||0)+1:c.forEach(function(c){var d=b.actors[c];d.forEach(function(b){a[b]=(a[b]||0)+1})}),a}function i(a,b){var c=Object.keys(b.actors);return 0===c.length?a.none=(a.none||0)-1:c.forEach(function(c){var d=b.actors[c];d.forEach(function(b){a[b]=(a[b]||0)-1})}),a}function j(){return{}}var k=d.rowChart("#"+b[0].children[0].attributes.id.value),l=e.buildDimension(function(a){return f.determineUniqueActors(a)}),m=l.groupAll().reduce(h,i,j).value();m.all=function(){var a=[];for(var b in this)this.hasOwnProperty(b)&&"all"!==b&&"top"!==b&&"order"!==b&&a.push({key:b,value:this[b]});return a},m.top=function(a){var b=this.all().sort(function(a,b){return b.value-a.value}).slice(0,a);return b},m.order=function(a){return a},k.width(a.innerWidth*(8/12)*(2/12)-32).height(1e3).margins({top:10,right:2,bottom:0,left:2}).dimension(l).keyAccessor(function(a){return a.key}).group(m).valueAccessor(function(a){return a.value}).x(c.scale.linear()).data(function(a){return a.top(50)}).gap(1).elasticX(!0).filterHandler(function(a,b){return g.publish("newFilterEvent",[this,b,a]),a.filter(null),0===b.length?a.filter(null):a.filter(function(a){var b=!0;if(null!==k.filters()){var c=k.filters();c.forEach(function(c){a.indexOf(c)<0&&(b=!1)})}return b}),b}.bind(k)).xAxis().tickValues([]),f.setActorColors(k.colors()),k.render()},g.subscribe("changingToWrangler",function(a){this.initializeChart()}.bind(this))}a.$inject=["$window","$element","d3","dc","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.allactorchart").controller("AllActorChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/allactorchart/allActorChart.directive.html",controller:"AllActorChartController",controllerAs:"aacCtrl"}}angular.module("uncertApp.allactorchart").directive("allActorChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){this.initializeChart=function(){var a=e.subwayChart("#"+c[0].children[0].attributes.id.value),g=f.buildDimension(function(a){var b=d.time.format("%Y%m%d").parse(a.time);return[b,h.determineUniqueActors(a)]}),i=g.group().reduce(function(a,b){return a.count=a.count+1,b.labels?b.labels.forEach(function(b){a.labels[b]=(a.labels[b]||0)+a.count}):a.labels.none=(a.labels.none||0)+a.count,b.mentions.forEach(function(b){a.mentions.push(b)}),a},function(a,b){return a.count=a.count-1,b.labels?b.labels.forEach(function(b){a.labels[b]=(a.labels[b]||0)-a.count}):a.labels.none=(a.labels.none||0)-a.count,b.mentions.forEach(function(b){a.mentions.pop(b)}),a},function(){return{count:0,labels:{},mentions:[]}}),j=[];i.all().map(function(a){a.key[1].forEach(function(a){j.indexOf(a)<0&&j.push(a)})}),a.width(b.innerWidth*(8/12)*(10/12)-32-8).height(1e3).margins({top:10,right:0,bottom:20,left:150}).dimension(g).group(i).filterHandler(h.customDefaultFilterHandler.bind(a)).transitionDuration(1500).x(d.time.scale()).elasticX(!0).xAxisPadding(100).keyAccessor(function(a){return a.key[0]}).y(d.scale.ordinal().domain(function(){return j}())).valueAccessor(function(a){return a.key[1]}).r(d.scale.linear()).elasticRadius(!0).radiusValueAccessor(function(a){return a.value.count>0?a.key[1].length:0}).minRadius(5).maxBubbleRelativeSize(.015).colors(d.scale.ordinal().range(h.getOrdinalColors())).colorAccessor(function(a){return a}).renderLabel(!0).minRadiusWithLabel(0).label(function(a){var b,c=-1,d=Object.keys(a.value.labels);return d.forEach(function(d){a.value.labels[d]>c&&(b=d,c=a.value.labels[d])}),b.toString()}).renderTitle(!0).title(function(a){var b=a.key[1],c="";b.forEach(function(a){c+=a+"\n"});var d="",e=Object.keys(a.value.labels);e.forEach(function(a){d+=a+"\n"});var f="\n---Actors-------\n"+c+"\n---Labels-------\n"+d+"\n---Mentions-----\n"+h.mentionToTxt(a.value);return f}.bind(this)),e.override(a,"xAxisMin",function(){var b=d.min(a.data(),function(b){return a.radiusValueAccessor()(b)>0?a.keyAccessor()(b):void 0});return e.utils.subtract(b,a.xAxisPadding())}),e.override(a,"xAxisMax",function(){var b=d.max(a.data(),function(b){return a.radiusValueAccessor()(b)>0?a.keyAccessor()(b):void 0});return e.utils.add(b,a.xAxisPadding())}),e.override(a,"_prepareYAxis",function(a){this.__prepareYAxis(a),this.y().rangeBands([this.yAxisHeight(),0],0,1)}),e.override(a,"fadeDeselectedArea",function(){a.hasFilter()?a.selectAll("g."+a.BUBBLE_NODE_CLASS).each(function(b){a.isSelectedNode(b)?a.highlightSelected(this):a.fadeDeselected(this)}):a.selectAll("g."+a.BUBBLE_NODE_CLASS).each(function(){a.resetHighlight(this)})}),e.override(a,"onClick",function(){}),a.render()},i.subscribe("crossfilter ready",function(){this.sources=f.getData().timeline.sources,this.initializeChart()}.bind(this))}a.$inject=["$scope","$window","$element","d3","dc","NdxService","colorbrewer","HelperFunctions","Messagebus"],angular.module("uncertApp.subwaychart").controller("SubwayChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/subwaychart/subwayChart.directive.html",controller:"SubwayChartController",controllerAs:"swcCtrl"}}angular.module("uncertApp.subwaychart").directive("subwayChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f){var g=function(a){a.selectAll("g.row").each(function(){b.select(this).append("path").data(b.select(this).data()).attr("class","symbol").attr("opacity","1").attr("fill",a.getColor).attr("transform",function(){return"translate("+b.select(this.parentNode).select("rect")[0][0].getAttribute("height")/4+","+b.select(this.parentNode).select("rect")[0][0].getAttribute("height")/4+")"}).attr("d",function(a){var c=b.svg.symbol();return c.size(b.select(this.parentNode).select("rect")[0][0].getAttribute("height")),c.type(e.symbolScale(a.key)),c()}.bind(this)),b.select(this).select("rect").attr("transform",function(){return"translate("+b.select(this.parentNode).select("rect")[0][0].getAttribute("height")/2+",0)"})})};this.initializeChart=function(){var h=c.rowChart("#"+a[0].children[0].attributes.id.value),i=d.buildDimension(function(a){return a.group}),j=i.group();h.margins({top:20,right:0,bottom:20,left:0}).width(parseInt(a[0].getClientRects()[1].width,10)).height(1e3).gap(2).keyAccessor(function(a){return a.key}).colors(b.scale.category20c()).colorAccessor(function(a){var b=a.key.split(":"),c=-(1e4*parseInt(b[0])+10*b[1].charCodeAt(2)+b[1].charCodeAt(3));return c}).dimension(i).group(j).filterHandler(function(a,b){return f.publish("newFilterEvent",[this,b,a]),a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a>=d&&d>=a)return!0}return!1}),b}.bind(h)).ordering(function(a){var b=a.key.split(":"),c=-(1e4*parseInt(b[0])+10*b[1].charCodeAt(2)+b[1].charCodeAt(3));return c}).x(b.scale.linear()).elasticX(!0).xAxis().tickValues([]),h.on("renderlet",g),e.setGroupColors(h.colors()),h.render()},f.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.grouprowchart").controller("GroupRowChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/grouprowchart/groupRowChart.directive.html",controller:"GroupRowChartController",controllerAs:"grcCtrl"}}angular.module("uncertApp.grouprowchart").directive("groupRowChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){this.initializeChart=function(){function h(a){return{all:function(){return a.all().filter(function(a){var b=parseInt(a.key[0].split(":")[0]);return b>1})},top:function(b){return a.top(1/0).filter(function(a){var b=parseInt(a.key[0].split(":")[0]);return b>1}).slice(0,b)}}}var i,j=c.customBubbleChart("#"+a[0].children[0].attributes.id.value),k=e.buildDimension(function(a){var c=b.time.format("%Y%m%d").parse(a.time),d=a.group;return[d,c]}),l=k.group().reduce(function(a,b){a.climax=a.climax+b.climax;var c=Object.keys(b.actors);return c.forEach(function(c){var d=b.actors[c];d.forEach(function(d){var e=c+" : "+d;a.actors[e]=(a.actors[e]||0)+b.climax})}),a.events[b.event]=(a.events[b.event]||0)+b.climax,b.labels?b.labels.forEach(function(b){a.labels[b]=(a.labels[b]||0)+1}):a.labels.none=(a.labels.none||0)+1,b.mentions.forEach(function(b){a.mentions.push(b)}),a},function(a,b){a.climax=a.climax-b.climax;var c=Object.keys(b.actors);return c.forEach(function(c){var d=b.actors[c];d.forEach(function(d){var e=c+" : "+d;a.actors[e]=(a.actors[e]||0)-b.climax})}),a.events[b.event]=(a.events[b.event]||0)-b.climax,b.labels?b.labels.forEach(function(b){a.labels[b]=(a.labels[b]||0)-1}):a.labels.none=(a.labels.none||0)-1,b.mentions.forEach(function(b){a.mentions.pop(b)}),a},function(){return{climax:0,events:{},actors:{},labels:{},mentions:[]}}),m=h(l);j.width(parseInt(a[0].getClientRects()[1].width,10)).height(1e3).margins({top:10,right:0,bottom:20,left:0}).dimension(k).group(m).filterHandler(function(a,b){return g.publish("newFilterEvent",[this,b,a]),a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a>=d&&d>=a)return!0}return!1}),b}.bind(j)).transitionDuration(1500).x(b.time.scale()).elasticX(!0).xAxisPadding(100).keyAccessor(function(a){return a.key[1]}).y(i=b.scale.ordinal().domain(function(){var a=m.all().map(function(a){return a.key[0]});return a}()).copy()).valueAccessor(function(a){return a.key[0]}).r(b.scale.linear().domain([0,b.max(j.data(),function(a){return a.value.climax})])).radiusValueAccessor(function(a){return a.value.climax}).minRadius(2).maxBubbleRelativeSize(.015).colors(d.RdYlGn[9]).colorDomain([0,b.max(j.data(),function(a){return a.value.climax})]).colorAccessor(function(a){return a.value.climax}).renderLabel(!0).minRadiusWithLabel(0).label(function(a){var b,c=-1,d=Object.keys(a.value.labels);return d.forEach(function(d){a.value.labels[d]>c&&(b=d,c=a.value.labels[d])}),b.toString()}).renderTitle(!0).title(function(a){var b=a.key[1].getDay()+"/"+a.key[1].getMonth()+"/"+a.key[1].getFullYear(),c=Object.keys(a.value.events),d="";c.forEach(function(b){d+=a.value.events[b]+" : "+b.toString()+"\n"});var e=Object.keys(a.value.actors),g="";e.forEach(function(b){g+=a.value.actors[b]+" : "+b.toString()+"\n"});var h=Object.keys(a.value.labels),i="";h.forEach(function(b){i+=a.value.labels[b]+" : "+b.toString()+"\n"});var j="\n-----Labels-----\n"+i+"\n-----Actors-----\n"+g+"\n-----Time-------\n"+b+"\n-----Group------\n"+a.key[0]+"\n---Mentions-----\n"+f.mentionToTxt(a.value);return j}),c.override(j,"xAxisMin",function(){var a=b.min(j.data(),function(a){return j.radiusValueAccessor()(a)>0?j.keyAccessor()(a):void 0});return c.utils.subtract(a,j.xAxisPadding())}),c.override(j,"xAxisMax",function(){var a=b.max(j.data(),function(a){return j.radiusValueAccessor()(a)>0?j.keyAccessor()(a):void 0});return c.utils.add(a,j.xAxisPadding())}),c.override(j,"_prepareYAxis",function(a){this.__prepareYAxis(a),this.y().rangeBands([this.yAxisHeight(),0],0,1)}),j.render()},g.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","colorbrewer","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.lanechart").controller("LaneChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/lanechart/laneChart.directive.html",controller:"LaneChartController",controllerAs:"lcCtrl"}}angular.module("uncertApp.lanechart").directive("laneChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f){this.initializeChart=function(){var g=c.customSeriesChart("#"+a[0].children[0].attributes.id.value),h=d.buildDimension(function(a){var c=a.group,d=b.time.format("%Y%m%d").parse(a.time),e=+a.climax,f=a.event;return[c,d,e,f]}),i=h.group().reduceSum(function(a){return+a.climax}),j=function(a){var b=c.scatterPlot(a).symbol(function(a){return e.symbolScale(a.key[0])}).symbolSize(6).highlightedSize(10).colors(e.getGroupColors()).colorAccessor(function(a){var b=a.key[0].split(":"),c=-(1e4*parseInt(b[0])+10*b[1].charCodeAt(2)+b[1].charCodeAt(3));return c});return b};g.width(parseInt(a[0].getClientRects()[1].width,10)).height(200).margins({top:10,right:10,bottom:20,left:20}).brushOn(!0).clipPadding(10).dimension(h).group(i).shareColors(!1).chart(j).seriesAccessor(function(a){return a.key[0]}).x(b.time.scale()).elasticX(!0).keyAccessor(function(a){return a.key[1]}).yAxisLabel("climax score sum").y(b.scale.linear()).elasticY(!0).renderHorizontalGridLines(!0).valueAccessor(function(a){return a.value}).filterHandler(function(a,b){return f.publish("newFilterEvent",[this,b,a]),a.filterFunction(function(a){var c=!0;return b.forEach(function(b){c===!0&&(a[1]<Math.min(b[0][0],b[1][0])||a[1]>Math.max(b[0][0],b[1][0])||a[2]<Math.min(b[0][1],b[1][1])||a[2]>Math.max(b[0][1],b[1][1]))&&(c=!1)}),c}),b}.bind(g)),g.render()},f.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.serieschart").controller("SeriesChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/serieschart/seriesChart.directive.html",controller:"SeriesChartController",controllerAs:"scCtrl"}}angular.module("uncertApp.serieschart").directive("seriesChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f){var g=function(a){var b=a.actors["actor:"],c="";return b.forEach(function(a){c+="<p>"+a+"</p>"}),c},h=function(a){var b=a.mentions,c="";return b.forEach(function(a){var b=a.snippet[0].substring(0,a.snippet_char[0]),d=a.snippet[0].substring(a.snippet_char[0],a.snippet_char[1]),e=a.snippet[0].substring(a.snippet_char[1],a.snippet[0].length);c+="<p>"+b+"</p><p><span class='highlighted-mention'>"+d+"</span>"+e+"</p>"}.bind(this)),c};this.initializeChart=function(){var e=c.dataTable("#"+a[0].children[0].attributes.id.value),f=d.buildDimension(function(a){return[a.instance]});this.ofs=0,this.pag=17,this.tableDisplay=function(){b.select("#begin").text(this.ofs),b.select("#end").text(this.ofs+this.pag-1),b.select("#last").attr("disabled",this.ofs-this.pag<0?"true":null),b.select("#next").attr("disabled",this.ofs+this.pag>=d.getSize()?"true":null),b.select("#size").text(d.getSize())},this.tableUpdate=function(){e.beginSlice(this.ofs),e.endSlice(this.ofs+this.pag),this.tableDisplay()},this.tableNext=function(){this.ofs+=this.pag,this.tableUpdate(),e.redraw()},this.tableLast=function(){this.ofs-=this.pag,this.tableUpdate(),e.redraw()},e.dimension(f).group(function(){return""}).showGroups(!1).size(1/0).sortBy(function(a){return a.time}).order(b.ascending).columns([{label:"<div class=col_0>Time</div>",format:function(a){var c=b.time.format("%Y%m%d").parse(a.time);return"<div class=col_0>"+c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear()+"</div>"}},{label:"<div class=col_1>Actors</div>",format:function(a){return"<div class=col_1>"+g(a)+"</div>"}},{label:"<div class=col_2>Mentions</div>",format:function(a){return"<div class=col_2>"+h(a)+"</div>"}}]),this.tableUpdate(),e.render()},f.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.datatable").controller("DataTableController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/datatable/dataTable.directive.html",controller:"DataTableController",controllerAs:"dtCtrl"}}angular.module("uncertApp.datatable").directive("datatableDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f){var g=function(a){var b=[],c=a.mentions;c.forEach(function(a){var c;c=a.perspective[0]?a.perspective[0].source:"",c&&b.push({source:c})});var d="";return b.forEach(function(a){d+="<p>"+a.source+"</p><p></br></p>"}),d},h=function(a){var b=a.mentions,c="";return b.forEach(function(a){var b=a.snippet[0].substring(0,a.snippet_char[0]),d=a.snippet[0].substring(a.snippet_char[0],a.snippet_char[1]),e=a.snippet[0].substring(a.snippet_char[1],a.snippet[0].length);c+="<p>"+b+"</p><p><span class='highlighted-mention'>"+d+"</span>"+e+"</p>"}.bind(this)),c};this.initializeChart=function(){var e=c.dataTable("#"+a[0].children[0].attributes.id.value),f=d.buildDimension(function(a){return[a.instance]});this.ofs=0,this.pag=17,this.tableDisplay=function(){b.select("#begin").text(this.ofs),b.select("#end").text(this.ofs+this.pag-1),b.select("#last").attr("disabled",this.ofs-this.pag<0?"true":null),b.select("#next").attr("disabled",this.ofs+this.pag>=d.getSize()?"true":null),b.select("#size").text(d.getSize())},this.tableUpdate=function(){e.beginSlice(this.ofs),e.endSlice(this.ofs+this.pag),this.tableDisplay()},this.tableNext=function(){this.ofs+=this.pag,this.tableUpdate(),e.redraw()},this.tableLast=function(){this.ofs-=this.pag,this.tableUpdate(),e.redraw()},e.dimension(f).group(function(){return""}).showGroups(!1).size(1/0).sortBy(function(a){return a.time}).order(b.ascending).columns([{label:"<div class=col_0>Time</div>",format:function(a){var c=b.time.format("%Y%m%d").parse(a.time);return"<div class=col_0>"+c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear()+"</div>"}},{label:"<div class=col_1>Source</div>",format:function(a){return"<div class=col_1>"+g(a)+"</div>"}},{label:"<div class=col_2>Mentions</div>",format:function(a){return"<div class=col_2>"+h(a)+"</div>"}}]),this.tableUpdate(),e.render()},f.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.datatableperspectives").controller("DataTablePerspectivesController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/datatable-perspectives/dataTablePerspectives.directive.html",controller:"DataTablePerspectivesController",controllerAs:"dtPersCtrl"}}angular.module("uncertApp.datatableperspectives").directive("datatablePerspectivesDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){this.initializeChart=function(){var d=c.lineChart("#"+a[0].children[0].attributes.id.value),f=void 0,h=void 0,i=e.pollDimension(function(a){var c=b.time.format("%Y%m%d").parse(a.time);return f&&h?(f>c&&(f=c),c>h&&(h=c)):(f=c,h=c),c}),j=i.group().reduce(function(a,b){var c=b.labels[0],d=c.split(":");return a.value=(a.value||0)+ +d[0],a},function(a,b){var c=b.labels[0],d=c.split(":");return a.value=(a.value||0)-+d[0],a},function(){return{value:0}}),k=i.group().reduce(function(a,b){var c=b.labels[0],d=c.split(":");return a.value=(a.value||0)+ +d[1],a},function(a,b){var c=b.labels[0],d=c.split(":");return a.value=(a.value||0)-+d[1],a},function(){return{value:0}}),l=i.group().reduce(function(a,b){var c=b.labels[0],d=c.split(":");return a.value=(a.value||0)+ +d[2],a},function(a,b){var c=b.labels[0],d=c.split(":");return a.value=(a.value||0)-+d[2],a},function(){return{value:0}});d.renderArea(!0).width(parseInt(a[0].getClientRects()[1].width,10)).height(100).margins({top:10,right:0,bottom:20,left:0}).transitionDuration(1500).dimension(i).x(b.time.scale().domain([f,h])).y(b.scale.linear().domain([0,100])).renderDataPoints(!0).renderHorizontalGridLines(!0).legend(c.legend().x(10).y(10).itemHeight(13).gap(5)).brushOn(!1).group(j,"Stay").valueAccessor(function(a){return a.value.value}).stack(l,"Undecided",function(a){return a.value.value}).stack(k,"Leave",function(a){return a.value.value}).ordinalColors(["rgb(20, 0, 255)","rgb(111, 111, 111)","rgb(255, 0, 0)"]),d.render(),g.subscribe("newFilterEvent",function(a,c){var e,g;c[0].filters&&c[0].filters().forEach(function(a){"RangedTwoDimensionalFilter"===a.filterType&&(e=a[0][0],g=a[1][0])}),e&&g?d.x(b.time.scale().domain([e,g])):d.x(b.time.scale().domain([f,h])),d.render()})},g.subscribe("crossfilter ready",function(){h.POLLS&&this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","colorbrewer","NdxService","HelperFunctions","Messagebus","uncertConf"],angular.module("uncertApp.pollchart").controller("PollChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/pollchart/pollChart.directive.html",controller:"PollChartController",controllerAs:"pcCtrl"}}angular.module("uncertApp.pollchart").directive("pollChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){this.initializeChart=function(){var e=c.rowChart("#"+a[0].children[0].attributes.id.value),f=d.pollDimension(function(a){return a.group}),g=f.group();e.margins({top:20,right:0,bottom:20,left:0}).width(parseInt(a[0].getClientRects()[1].width,10)).height(100).gap(2).keyAccessor(function(a){return a.key}).dimension(f).group(g).x(b.scale.linear()).elasticX(!0).xAxis().tickValues([]),c.override(e,"onClick",function(a){}),e.render()},f.subscribe("crossfilter ready",function(){g.POLLS&&this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","NdxService","HelperFunctions","Messagebus","uncertConf"],angular.module("uncertApp.pollrowchart").controller("PollRowChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/pollrowchart/pollRowChart.directive.html",controller:"PollRowChartController",controllerAs:"prcCtrl"}}angular.module("uncertApp.pollrowchart").directive("pollRowChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){this.initializeChart=function(){var f,h=c.customBubbleChart("#"+a[0].children[0].attributes.id.value),i=void 0,j=void 0,k=e.pollDimension(function(a){var c=b.time.format("%Y%m%d").parse(a.time);i&&j?(i>c&&(i=c),c>j&&(j=c)):(i=c,j=c);var d=a.group;return[d,c]}),l=k.group().reduce(function(a,b){return a.climax=a.climax+b.climax,a},function(a,b){return a.climax=a.climax-b.climax,a},function(){return{climax:0,events:{},actors:{},labels:{}}});h.width(parseInt(a[0].getClientRects()[1].width,10)).height(100).margins({top:10,right:0,bottom:20,left:200}).dimension(k).group(l).transitionDuration(1500).x(b.time.scale().domain([i,j])).xAxisPadding(100).keyAccessor(function(a){return a.key[1]}).y(f=b.scale.ordinal().domain(function(){var a=l.all().map(function(a){return a.key[0]});return a}()).copy()).valueAccessor(function(a){return a.key[0]}).r(b.scale.linear().domain([0,b.max(h.data(),function(a){return a.value.climax})])).radiusValueAccessor(function(a){return a.value.climax}).minRadius(1).maxBubbleRelativeSize(.01).colors(d.RdYlGn[9]).colorDomain([0,b.max(h.data(),function(a){return a.value.climax})]).colorAccessor(function(a){return a.value.climax}).renderLabel(!1).renderTitle(!1),c.override(h,"xAxisMin",function(){var a=b.min(h.data(),function(a){return h.radiusValueAccessor()(a)>0?h.keyAccessor()(a):void 0});return c.utils.subtract(a,h.xAxisPadding())}),c.override(h,"xAxisMax",function(){var a=b.max(h.data(),function(a){return h.radiusValueAccessor()(a)>0?h.keyAccessor()(a):void 0});return c.utils.add(a,h.xAxisPadding())}),c.override(h,"_prepareYAxis",function(a){this.__prepareYAxis(a),this.y().rangeBands([this.yAxisHeight(),0],0,1)}),c.override(h,"onClick",function(a){}),h.render(),g.subscribe("newFilterEvent",function(a,c){var d,e;c.filters&&c[0].filters().forEach(function(a){"RangedTwoDimensionalFilter"===a.filterType&&(d=a[0][0],e=a[1][0])}),d&&e?h.x(b.time.scale().domain([d,e])):h.x(b.time.scale().domain([i,j]))})},g.subscribe("crossfilter ready",function(){h.POLLS&&this.initializeChart()}.bind(this))}a.$inject=["$element","d3","dc","colorbrewer","NdxService","HelperFunctions","Messagebus","uncertConf"],angular.module("uncertApp.polllanechart").controller("PollLaneChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/polllanechart/pollLaneChart.directive.html",controller:"PollLaneChartController",controllerAs:"plcCtrl"}}angular.module("uncertApp.polllanechart").directive("pollLaneChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){this.initializeChart=function(){function h(a,b){var c=Object.keys(b.mentions);return c.forEach(function(c){var d=b.mentions[c];d.perspective.forEach(function(b){var c=b.source.split(":");"cite"===c[0]&&(a[c[1]]=(a[c[1]]||0)+1)})}),a}function i(a,b){var c=Object.keys(b.mentions);return c.forEach(function(c){var d=b.mentions[c];d.perspective.forEach(function(b){var c=b.source.split(":");"cite"===c[0]&&(a[c[1]]=(a[c[1]]||0)-1)})}),a}function j(){return{}}var k=d.rowChart("#"+b[0].children[0].attributes.id.value),l=e.buildDimension(function(a){return f.determineUniqueCitationSources(a)}),m=l.groupAll().reduce(h,i,j).value();m.all=function(){var a=[];for(var b in this)this.hasOwnProperty(b)&&"all"!==b&&"top"!==b&&"order"!==b&&a.push({key:b,value:this[b]});return a},m.top=function(a){var b=this.all().sort(function(a,b){return b.value-a.value}).slice(0,a);return b},m.order=function(a){return a},k.width(a.innerWidth*(8/12)*(2/12)-32).height(400).margins({top:10,right:2,bottom:0,left:2}).dimension(l).keyAccessor(function(a){return a.key}).group(m).valueAccessor(function(a){return a.value}).x(c.scale.linear()).data(function(a){return a.top(20)}).gap(1).elasticX(!0).filterHandler(function(a,b){return g.publish("newFilterEvent",[this,b,a]),a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a===d||a.indexOf(d)>=0)return!0}return!1}),b}.bind(k)).xAxis().tickValues([]),k.render()},g.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$window","$element","d3","dc","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.allcitationschart").controller("AllCitationsChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/allcitationschart/allCitationsChart.directive.html",controller:"AllCitationsChartController",controllerAs:"accCtrl"}}angular.module("uncertApp.allcitationschart").directive("allCitationsChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){this.initializeChart=function(){function h(a,b){var c=Object.keys(b.mentions);return c.forEach(function(c){var d=b.mentions[c];d.perspective.forEach(function(b){var c=b.source.split(":");"author"===c[0]&&(a[c[1]]=(a[c[1]]||0)+1)})}),a}function i(a,b){var c=Object.keys(b.mentions);return c.forEach(function(c){var d=b.mentions[c];d.perspective.forEach(function(b){var c=b.source.split(":");"author"===c[0]&&(a[c[1]]=(a[c[1]]||0)-1)})}),a}function j(){return{}}var k=d.rowChart("#"+b[0].children[0].attributes.id.value),l=e.buildDimension(function(a){return f.determineUniqueAuthors(a)}),m=l.groupAll().reduce(h,i,j).value();m.all=function(){var a=[];for(var b in this)this.hasOwnProperty(b)&&"all"!==b&&"top"!==b&&"order"!==b&&a.push({key:b,value:this[b]});return a},m.top=function(a){var b=this.all().sort(function(a,b){return b.value-a.value}).slice(0,a);return b},m.order=function(a){return a},k.width(a.innerWidth*(8/12)*(2/12)-32).height(400).margins({top:10,right:2,bottom:0,left:2}).dimension(l).keyAccessor(function(a){return a.key}).group(m).valueAccessor(function(a){return a.value}).x(c.scale.linear()).data(function(a){return a.top(20)}).gap(1).elasticX(!0).filterHandler(function(a,b){return g.publish("newFilterEvent",[this,b,a]),a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a===d||a.indexOf(d)>=0)return!0}return!1}),b}.bind(k)).xAxis().tickValues([]),k.render()},g.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$window","$element","d3","dc","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.allauthorschart").controller("AllAuthorsChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/allauthorschart/allAuthorsChart.directive.html",controller:"AllAuthorsChartController",controllerAs:"aaucCtrl"}}angular.module("uncertApp.allauthorschart").directive("allAuthorsChartDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){this.perspectiveOption="sentiment",this.initializeChart=function(){this.customBubbleChart=d.dyndomBubbleChart("#"+b[0].children[0].attributes.id.value);var i=f.buildDimension(function(a){var b=c.time.format("%Y%m%d").parse(a.time);return[b,g.determineUniqueSources(a)]}),j=i.group().reduce(function(a,b){var c=Object.keys(b.mentions);return c.forEach(function(c){var d=b.mentions[c];a.climax=(a.climax||0)+b.climax,d.perspective.forEach(function(b){var c=b.attribution,d=b.source;a.sources[d]=(a.sources[d]||0)+1,a.perspectives=(a.perspectives||0)+1;var e=0;"confirm"===c.belief?e+=1:"denial"===c.belief?e-=1:"deny"===c.belief&&(e-=1),a.belief[d]=(a.belief[d]||0)+e;var f=0;"certain"===c.certainty?f+=1:"uncertain"===c.certainty&&(f-=1),a.certainty[d]=(a.certainty[d]||0)+f;var g=0;"likely"===c.possibility?g+=1:"unlikely"===c.possibility&&(g-=1),a.possibility[d]=(a.possibility[d]||0)+g;var h=0;"positive"===c.sentiment?h+=1:"negative"===c.sentiment&&(h-=1),a.sentiment[d]=(a.sentiment[d]||0)+h;var i=0;"future"===c.when?i+=1:"past"===c.when&&(i-=1),a.when[d]=(a.when[d]||0)+i})}),a},function(a,b){var c=Object.keys(b.mentions);return c.forEach(function(c){var d=b.mentions[c];a.climax=(a.climax||0)-b.climax,d.perspective.forEach(function(b){var c=b.attribution,d=b.source;a.sources[d]=(a.sources[d]||0)-1,a.perspectives=(a.perspectives||0)-1;var e=0;"confirm"===c.belief?e+=1:"denial"===c.belief&&(e-=1),a.belief[d]=(a.belief[d]||0)-e;var f=0;"certain"===c.certainty?f+=1:"uncertain"===c.certainty&&(f-=1),a.certainty[d]=(a.certainty[d]||0)-f;var g=0;"likely"===c.possibility?g+=1:"unlikely"===c.possibility&&(g-=1),a.possibility[d]=(a.possibility[d]||0)-g;var h=0;"positive"===c.sentiment?h+=1:"negative"===c.sentiment&&(h-=1),a.sentiment[d]=(a.sentiment[d]||0)-h;var i=0;"future"===c.when?i+=1:"past"===c.when&&(i-=1),a.when[d]=(a.when[d]||0)-i})}),a},function(){return{perspectives:0,climax:0,sources:{},belief:{},certainty:{},possibility:{},sentiment:{},when:{}}}),k=[];j.all().map(function(a){a.key[1].forEach(function(a){k.indexOf(a)<0&&k.push(a)})}),this.customBubbleChart.width(a.innerWidth*(8/12)*(10/12)-32-8).height(800).margins({top:10,right:0,bottom:20,left:100}).dimension(i).group(j).filterHandler(function(a,b){return h.publish("newFilterEvent",[this,b,a]),a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(d[0]<=a[0]&&d[0]>=a[0]&&a[1].indexOf(d[1])>=0)return!0}return!1}),b}.bind(this.customBubbleChart)).transitionDuration(1500).x(c.time.scale()).elasticX(!0).xAxisPadding(100).keyAccessor(function(a){return a.key[0]}).y(c.scale.ordinal().domain(function(){return k}())).valueAccessor(function(a){return a.key[1]}).r(c.scale.linear().domain([0,c.max(this.customBubbleChart.data(),function(a){return a.value.climax})])).radiusValueAccessor(function(a){return a.value.climax}).minRadius(2).maxBubbleRelativeSize(.015).colors(e.RdBu[9]).colorDomain([0,1]).colorAccessor(function(a){return a.value.perspectives>0?"when"===this.perspectiveOption?-(.5*a.value[this.perspectiveOption][a.key[1]])/a.value.perspectives+.5:.5*a.value[this.perspectiveOption][a.key[1]]/a.value.perspectives+.5:0;
}.bind(this)).renderLabel(!1).legend(d.legend().x(400).y(10).itemHeight(13).gap(5)).renderTitle(!0).title(function(a){var b=a.key[0].getDate()+"/"+(a.key[0].getMonth()+1)+"/"+a.key[0].getFullYear()+"\n",c=a.key[1]+" in "+a.value.sources[a.key[1]]+" articles.\n",d=Object.keys(a.value.sources),e="";d.forEach(function(b){b!==a.key[1]&&(e+=b+" : "+a.value.sources[b]+"\n")});var f=a.value.belief[a.key[1]],g="confirm";0>f&&(g="deny");var h=a.value.certainty[a.key[1]],i="certain";0>h&&(i="uncertain");var j=a.value.possibility[a.key[1]],k="likely";0>j&&(k="unlikely");var l=a.value.sentiment[a.key[1]],m="neutral";0>l?m="negative":l>0&&(m="positive");var n=a.value.when[a.key[1]],o="now";0>n?o="past":n>0&&(o="future");var p=b+"\n"+c+"\n\n---- Other Sources for this event ----\n"+e+"\n----- Perspective on this event ------\nbelief     : "+g+"\ncertainty  : "+i+"\npossibility: "+k+"\nsentiment  : "+m+"\nwhen       : "+o+"\n";return p}.bind(this)),d.override(this.customBubbleChart,"xAxisMin",function(){var a=c.min(this.customBubbleChart.data(),function(a){return this.customBubbleChart.radiusValueAccessor()(a)>0?this.customBubbleChart.keyAccessor()(a):void 0}.bind(this));return d.utils.subtract(a,this.customBubbleChart.xAxisPadding())}.bind(this)),d.override(this.customBubbleChart,"xAxisMax",function(){var a=c.max(this.customBubbleChart.data(),function(a){return this.customBubbleChart.radiusValueAccessor()(a)>0?this.customBubbleChart.keyAccessor()(a):void 0}.bind(this));return d.utils.add(a,this.customBubbleChart.xAxisPadding())}.bind(this)),d.override(this.customBubbleChart,"_prepareYAxis",function(a){this.customBubbleChart.__prepareYAxis(a),this.customBubbleChart.y().rangeBands([this.customBubbleChart.yAxisHeight(),0],0,1)}.bind(this)),this.customBubbleChart.render()}.bind(this),h.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this)),h.subscribe("newPerspectiveOption",function(a,b){this.perspectiveOption=b,this.customBubbleChart.redraw()}.bind(this))}a.$inject=["$window","$element","d3","dc","colorbrewer","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.perspectivelanechart").controller("PerspectiveLaneChartController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/perspectivelanechart/perspectiveLaneChart.directive.html",controller:"PerspectiveLaneChartController",controllerAs:"plcCtrl"}}angular.module("uncertApp.perspectivelanechart").directive("perspectiveLaneChartDirective",a)}(),function(){"use strict";function a(a){this.options=["belief","certainty","possibility","sentiment","when"],this.selectedOption="sentiment",this.changeOption=function(b){this.selectedOption=b,a.publish("newPerspectiveOption",b)}}a.$inject=["Messagebus"],angular.module("uncertApp.perspectivelanechart").controller("PerspectiveLaneChartOptionSelectorController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/perspectivelanechart/optionSelector.directive.html",controller:"PerspectiveLaneChartOptionSelectorController",controllerAs:"plcOsCtrl"}}angular.module("uncertApp.perspectivelanechart").directive("perspectiveLaneChartOptionSelectorDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){this.initializeChart=function(){var g=d.barChart("#"+b[0].children[0].children[0].attributes.id.value),h=d.barChart("#"+b[0].children[0].children[1].attributes.id.value),i=d.barChart("#"+b[0].children[0].children[2].attributes.id.value),j=d.barChart("#"+b[0].children[0].children[3].attributes.id.value),k=d.barChart("#"+b[0].children[0].children[4].attributes.id.value),l=f.buildDimension(function(a){var b=0,c=Object.keys(a.mentions);return c.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.attribution;"confirm"===c.belief?b+=1:"denial"===c.belief?b-=1:"deny"===c.belief&&(b-=1)})}),b}),m=l.group();g.width((a.innerWidth*(8/12)*(10/12)-32-8)/5).height(100).margins({top:0,right:0,bottom:20,left:0}).x(c.scale.linear().domain([-5,5])).y(c.scale.sqrt().domain([0,25])).colors(e.RdBu[3]).colorDomain([-1,1]).colorAccessor(function(a){return a.key}).elasticY(!0).brushOn(!0).dimension(l).group(m).controlsUseVisibility(!0);var n=f.buildDimension(function(a){var b=0,c=Object.keys(a.mentions);return c.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.attribution;"certain"===c.certainty?b+=1:"uncertain"===c.certainty&&(b-=1)})}),b}),o=n.group();h.width((a.innerWidth*(8/12)*(10/12)-32-8)/5).height(100).margins({top:0,right:0,bottom:20,left:0}).x(c.scale.linear().domain([-5,5])).y(c.scale.sqrt().domain([0,25])).colors(e.RdBu[3]).colorDomain([-1,1]).colorAccessor(function(a){return a.key}).elasticY(!0).brushOn(!0).dimension(n).group(o).controlsUseVisibility(!0);var p=f.buildDimension(function(a){var b=0,c=Object.keys(a.mentions);return c.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.attribution;"likely"===c.possibility?b+=1:"unlikely"===c.possibility&&(b-=1)})}),b}),q=p.group();i.width((a.innerWidth*(8/12)*(10/12)-32-8)/5).height(100).margins({top:0,right:0,bottom:20,left:0}).x(c.scale.linear().domain([-5,5])).y(c.scale.sqrt().domain([0,25])).colors(e.RdBu[3]).colorDomain([-1,1]).colorAccessor(function(a){return a.key}).elasticY(!0).brushOn(!0).dimension(p).group(q).controlsUseVisibility(!0);var r=f.buildDimension(function(a){var b=0,c=Object.keys(a.mentions);return c.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.attribution;"positive"===c.sentiment?b+=1:"negative"===c.sentiment&&(b-=1)})}),b}),s=r.group();j.width((a.innerWidth*(8/12)*(10/12)-32-8)/5).height(100).margins({top:0,right:0,bottom:20,left:0}).x(c.scale.linear().domain([-5,5])).y(c.scale.sqrt().domain([0,25])).colors(e.RdBu[3]).colorDomain([-1,1]).colorAccessor(function(a){return a.key}).elasticY(!0).brushOn(!0).dimension(r).group(s).controlsUseVisibility(!0);var t=f.buildDimension(function(a){var b=0,c=Object.keys(a.mentions);return c.forEach(function(c){var d=a.mentions[c];d.perspective.forEach(function(a){var c=a.attribution;"future"===c.when?b+=1:"past"===c.when&&(b-=1)})}),b}),u=t.group();k.width((a.innerWidth*(8/12)*(10/12)-32-8)/5).height(100).margins({top:0,right:0,bottom:20,left:0}).x(c.scale.linear().domain([-5,5])).y(c.scale.sqrt().domain([0,25])).colors(e.RdBu[3]).colorDomain([-1,1]).colorAccessor(function(a){return-a.key}).elasticY(!0).brushOn(!0).dimension(t).group(u).controlsUseVisibility(!0),g.render(),h.render(),i.render(),j.render(),k.render()},h.subscribe("crossfilter ready",function(){this.initializeChart()}.bind(this))}a.$inject=["$window","$element","d3","dc","colorbrewer","NdxService","HelperFunctions","Messagebus"],angular.module("uncertApp.perspectivefilters").controller("PerspectiveFiltersController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/perspectivefilters/perspectiveFilters.directive.html",controller:"PerspectiveFiltersController",controllerAs:"pfCtrl"}}angular.module("uncertApp.perspectivefilters").directive("perspectiveFiltersDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f){this.input="",this.applyFilter=function(){var a=this.input;if(this.dimension.filterAll(),""!==a){var b=[a];this.dimension.filterFunction(function(a){var c=!1,d=b[0];return a.forEach(function(a){var b=new RegExp(d,"i");c!==!0&&void 0!==a&&null!==a&&-1!==a.search(b)&&(c=!0)}),c})}d.redrawAll()},this.initializeChart=function(a,b,c){var d=this;d.chartHeader=c;var g=b.split(",");g.forEach(function(a,b){g[b]=a.trim()}),this.dimension=f.buildDimensionWithProperties(e,g)},this.linkedInit=function(a,b,c,d){e.ready.then(function(){this.initializeChart(a,c,d)}.bind(this))}}a.$inject=["$scope","$element","d3","dc","NdxService","HelperFunctions"],angular.module("uncertApp.charts").controller("FullTextCrossfilterSearchController",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"scripts/fullTextCrossfilterSearch/fullTextCrossfilterSearch.directive.html",controller:"FullTextCrossfilterSearchController",controllerAs:"fTCSCtrl",scope:!0,link:function(a,b,c,d){d.linkedInit(b,c.ndxServiceName,c.jsonFields,c.chartHeader)}}}angular.module("uncertApp.charts").directive("fullTextCrossfilterSearchDirective",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){var h=this;this.data={};var i=b.defer();this.ready=i.promise,this.load=function(){var b=e.DATA_JSON_URL.split(":")[0];if("file"===b){var c=e.DATA_JSON_URL.split(":")[1];d.json(c,function(a,b){return a?console.warn(a):(h.data=b,i.resolve(h.data),void f.publish("data loaded",this.getData))}.bind(this))}else"http"===b||"https"===b?h.data=a.get(e.DATA_JSON_URL).success(this.onLoad).error(this.onLoadFailure):console.log("Unknown data type.")}.bind(this),this.urlload=function(b){a.get(b.targetScope.fc.query).success(this.onUrlLoad).error(this.onLoadFailure)}.bind(this),this.onUrlLoad=function(a){h.data=a,g.success("New data loaded!"),f.publish("data loaded",this.getData)}.bind(this),this.onLoad=function(a){h.data=a,i.resolve(a),f.publish("data loaded",this.getData)}.bind(this),this.onLoadFailure=function(){c.log("Failed to load data!!"),g.error("Failed to load data!!"),i.reject.apply(this,arguments)},this.getData=function(){return this.data}.bind(this),f.subscribe("data request",this.urlload)}a.$inject=["$http","$q","$log","d3","uncertConf","Messagebus","toastr"],angular.module("uncertApp.core").service("DataService",a)}(),angular.module("uncertApp.templates").run(["$templateCache",function(a){"use strict";a.put("scripts/allactorchart/allActorChart.directive.html",'<div id="rowchart_allActors"></div>\r\n'),a.put("scripts/allauthorschart/allAuthorsChart.directive.html",'<div id="rowchart_allAuthors"></div>\r\n'),a.put("scripts/allcitationschart/allCitationsChart.directive.html",'<div id="rowchart_allCitations"></div>\r\n'),a.put("scripts/allsourceschart/allCitationsChart.directive.html",'<div id="rowchart_allSources"></div>\r\n'),a.put("scripts/authentication/authentication.directive.html",'<div ng-show="error" class="alert alert-danger">{{error}}</div>\r\n<div ng-show="!authentication.loggedIn">\r\n  <form name="form" ng-submit="authentication.login()" role="form">\r\n      <div class="form-group">\r\n          <label for="username">Username</label>\r\n          <i class="fa fa-key"></i>\r\n          <input type="text" name="username" id="username" class="form-control" ng-model="username" required />\r\n          <span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">Username is required</span>\r\n      </div>\r\n      <div class="form-group">\r\n          <label for="password">Password</label>\r\n          <i class="fa fa-lock"></i>\r\n          <input type="password" name="password" id="password" class="form-control" ng-model="password" required />\r\n          <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required</span>\r\n      </div>\r\n      <div class="form-actions">\r\n          <button type="submit" ng-disabled="form.$invalid || dataLoading" class="btn btn-danger">Login</button>\r\n          <img ng-if="dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>\r\n      </div>\r\n  </form>\r\n<div>\r\n'),a.put("scripts/breadcrumbs/breadcrumbs.directive.html",'<div class="breadcrumb_class">\r\n  <span>Filters applied (click to remove): </span>\r\n  <span ng-repeat="element in bc.filters"> &gt;\r\n    <span ng-click="bc.click(element)"><a>{{element.filter}}</a></span>\r\n  </span>\r\n  <span class="breadcrumb_empty" ng-if="bc.filters.length == 0">No Filters</span>\r\n</div>\r\n'),a.put("scripts/datatable-perspectives/dataTablePerspectives.directive.html",'<table id="data-table-perspectives" class="table table-hover dc-data-table dc-chart"></table>\r\n<div id="paging">\r\n  Showing <span id="begin"></span>-<span id="end"></span> of <span id="size"></span>.\r\n  <input id="last" type="Button" value="Prev" ng-click="dtPersCtrl.tableLast()" />\r\n  <input id="next" type="button" value="Next" ng-click="dtPersCtrl.tableNext()"/>\r\n</div>\r\n'),a.put("scripts/datatable/dataTable.directive.html",'<table id="data-table" class="table table-hover dc-data-table dc-chart"></table>\r\n<div id="paging">\r\n  Showing <span id="begin"></span>-<span id="end"></span> of <span id="size"></span>.\r\n  <input id="last" type="Button" value="Prev" ng-click="dtCtrl.tableLast()" />\r\n  <input id="next" type="button" value="Next" ng-click="dtCtrl.tableNext()"/>\r\n</div>\r\n'),a.put("scripts/fileloading/fileLoading.directive.html",'<div class="form-group clickable">\r\n    <div class="input-group">\r\n        <input type="url" class="form-control" placeholder="Datafile location..." ng-model="fc.query" ng-keypress="fc.onQueryKeyPress($event)">\r\n        <span class="input-group-btn">\r\n          <button class="btn btn-default" type="button" ng-click="fc.clear()" title="Clear"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>\r\n          <button class="btn btn-default" type="button" ng-click="fc.search()" title="Search"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>\r\n        </span>\r\n    </div>\r\n</div>\r\n'),a.put("scripts/fullTextCrossfilterSearch/fullTextCrossfilterSearch.directive.html",'<h6>{{fTCSCtrl.chartHeader}}</h6>\n<div id="fullltextSearch_{{fTCSCtrl.ndxServiceName}}">\n  <input type="text" ng-model="fTCSCtrl.input" ng-change="fTCSCtrl.applyFilter()" ng-model-options="{debounce: 1000}"></input>\n</div>\n'),a.put("scripts/grouprowchart/groupRowChart.directive.html",'<div id="rowchart_groups"></div>\r\n'),a.put("scripts/lanechart/laneChart.directive.html",'<div id="laneChart"></div>\r\n'),a.put("scripts/perspectivefilters/perspectiveFilters.directive.html",'<span id="perspective_filters_flexbox">\r\n  <div id="belief_filter"></div>\r\n  <div id="certainty_filter"></div>\r\n  <div id="possibility_filter"></div>\r\n  <div id="sentiment_filter"></div>\r\n  <div id="when_filter"></div>\r\n</span>\r\n'),a.put("scripts/perspectivelanechart/optionSelector.directive.html",'<form class="radio-parent" name="radioForm" ng-controller="PerspectiveLaneChartOptionSelectorController">\r\n  <label class="radio-child" ng-repeat="option in plcOsCtrl.options">\r\n    <input type="radio" ng-model="plcOsCtrl.selectedOption" value="{{option}}" ng-change="plcOsCtrl.changeOption(option)">{{option}}\r\n  </label>\r\n</form>\r\n'),a.put("scripts/perspectivelanechart/perspectiveLaneChart.directive.html",'<div id="perspectiveLaneChart"></div>\r\n'),a.put("scripts/pollchart/pollChart.directive.html",'<div id="pollLaneChart"></div>\r\n'),a.put("scripts/polllanechart/pollLaneChart.directive.html",'<div id="pollLaneChart"></div>\r\n'),a.put("scripts/pollrowchart/pollRowChart.directive.html",'<div id="chart_polls"></div>\r\n'),a.put("scripts/rdf/rdf.directive.html",'<div class="row">\r\n  <div class="col-md-12">\r\n    <div>\r\n      <h1>Triples found in trig file</h1>\r\n      <ul>\r\n        <li ng-repeat="triple in rdfcontroller.triples">\r\n          Subject:\r\n          <a href="{{ triple.subject }}">{{triple.subject}}</a>, Predicate:\r\n          <a href="{{ triple.predicate }}">{{triple.predicate}}</a>, Object:\r\n          <a href="{{ triple.object }}">{{triple.object}}</a>\r\n        </li>\r\n      </ul>\r\n      {{ rdfcontroller.triples.length }} triples found\r\n    </div>\r\n  </div>\r\n</div>\r\n'),a.put("scripts/selector/selector.directive.html",'<div class="mdl-grid">\r\n  <div class="mdl-cell mdl-cell--4-col">\r\n    <div class="logo-vu"></div>\r\n  </div>\r\n  <div class="mdl-cell mdl-cell--4-col">\r\n    <div class="logo-nwr"></div>\r\n  </div>\r\n  <div class="mdl-cell mdl-cell--4-col">\r\n    <div class="logo-nlesc"></div>\r\n  </div>\r\n</div>\r\n\n<full-text-crossfilter-search-directive\n  chart-header="Search for keywords"\n  ndx-service-name="software"\n  json-fields="actors.actor:, mentions.perspective.source, mentions.snippet, prefLabel, labels">\n</full-text-crossfilter-search-directive>\n\n<!-- <file-loading-directive></file-loading-directive> -->\r\n<breadcrumbs-directive></breadcrumbs-directive>\r\n\r\n<div class="mdl-grid">\n	<div class="mdl-cell mdl-cell--4-col" ng-class="{ active: isSet(1) }">\r\n		<a id="storylines-button" href class="btn btn:hover" ng-click="setTab(1)"> View Storylines </a>\r\n	</div>\r\n	<div class="mdl-cell mdl-cell--4-col" ng-class="{ active: isSet(2) }">\r\n		<a id="relations-button" href class="btn btn:hover" ng-click="setTab(2)"> View Relations </a>\r\n	</div>\r\n	<div class="mdl-cell mdl-cell--4-col" ng-class="{ active: isSet(3) }">\r\n		<a id="perspectives-button" href class="btn btn:hover" ng-click="setTab(3)"> View Perspectives </a>\r\n	</div>\r\n</div>\r\n<div ng-show="isSet(1)"><view-storylines-directive></view-storylines-directive></div>\r\n<div ng-show="isSet(2)"><view-relations-directive></view-relations-directive></div>\r\n<div ng-show="isSet(3)"><view-perspectives-directive></view-perspectives-directive></div>\r\n'),a.put("scripts/serieschart/seriesChart.directive.html",'<div id="timeline"></div>\r\n'),a.put("scripts/sparql/sparql.directive.html",'<div class="row">\r\n  <div class="col-md-12">\r\n    <h1>SPARQL Queries</h1>\r\n\r\n    <div class="alert alert-danger" id="errorMessage" ng-show="sparqlcontroller.errorMessage">\r\n      Error:\r\n      {{sparqlcontroller.errorMessage}}\r\n    </div>\r\n\r\n    <form class="form-vertical" role="form">\r\n      <div class="form-group">\r\n        <label for="query">Query</label>\r\n        <textarea class="form-control" id="query" ng-model="sparqlcontroller.query" rows="5"></textarea>\r\n      </div>\r\n      <div class="form-group">\r\n        <label for="dataset">Dataset</label>\r\n        <div id="dataset">\r\n          <div class="radio-inline" ng-repeat="ds in sparqlcontroller.datasets">\r\n            <label class="radio-inline">\r\n              <input name="dataset" ng-checked="{{ds==sparqlcontroller.dataset}}" ng-click="sparqlcontroller.dataset=ds" type="radio">{{ds}}\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="form-group">\r\n        <button class="btn btn-primary" ng-click="sparqlcontroller.doQuery()" type="submit">Submit query</button>\r\n      </div>\r\n    </form>\r\n\r\n    <div id="resultText" ng-show="sparqlcontroller.jsonData!={}">\r\n      <h2>Query results</h2>\r\n      <table class="table table-striped">\r\n        <thead>\r\n          <tr>\r\n            <th ng-repeat="h in sparqlcontroller.jsonData.head.vars">{{h}}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr ng-repeat="b in sparqlcontroller.jsonData.results.bindings">\r\n            <td ng-repeat="h in sparqlcontroller.jsonData.head.vars">\r\n              <span ng-bind-html="b[h] | formatSparqlBinding"></span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n'),a.put("scripts/subwaychart/subwayChart.directive.html",'<div id="subwayChart"></div>\r\n'),a.put("scripts/viewperspectives/view.perspectives.directive.html",'<div class="mdl-grid">\r\n  <div class="mdl-cell mdl-cell--8-col myChart">\r\n    <div class="mdl-grid">\r\n      <div class="mdl-cell mdl-cell--2-col myChart">\r\n        <all-citations-chart-directive></all-citations-chart-directive>\r\n        <all-authors-chart-directive></all-authors-chart-directive>\r\n      </div>\r\n      <div class="mdl-cell mdl-cell--10-col myChart">\r\n        <perspective-lane-chart-directive></perspective-lane-chart-directive>\r\n        <perspective-lane-chart-option-selector-directive></perspective-lane-chart-option-selector-directive>\r\n        <perspective-filters-directive></perspective-filters-directive>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div class="mdl-cell mdl-cell--4-col myChart">\r\n    <datatable-perspectives-directive></datatable-perspectives-directive>\r\n  </div>\r\n</div>\r\n'),a.put("scripts/viewrelations/view.relations.directive.html",'<div class="mdl-grid">\r\n  <div class="mdl-cell mdl-cell--8-col">\r\n    <div class="mdl-grid">\r\n      <div class="mdl-cell mdl-cell--2-col myChart">\r\n        <all-actor-chart-directive></all-actor-chart-directive>\r\n      </div>\r\n      <div class="mdl-cell mdl-cell--10-col myChart">\r\n        <subway-chart-directive></subway-chart-directive>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="mdl-cell mdl-cell--4-col myChart">\r\n    <datatable-directive></datatable-directive>\r\n  </div>\r\n</div>\r\n'),a.put("scripts/viewstorylines/view.storylines.directive.html",'<div class="mdl-grid myChart">\r\n  <div class="mdl-cell mdl-cell--12-col">\r\n    <poll-chart-directive></poll-chart-directive>\r\n  </div>\r\n</div>\r\n\r\n<div class="mdl-grid myChart">\r\n  <div class="mdl-cell mdl-cell--12-col">\r\n    <div class="mdl-grid">\r\n      <div class="mdl-cell mdl-cell--2-col">\r\n        <group-row-chart-directive></group-row-chart-directive>\r\n      </div>\r\n      <div class="mdl-cell mdl-cell--10-col">\r\n        <lane-chart-directive></lane-chart-directive>\r\n      </div>\r\n    </div>\r\n    <div class="mdl-grid">\r\n      <div class="mdl-cell mdl-cell--12-col">\r\n        <series-chart-directive></series-chart-directive>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n')}]);